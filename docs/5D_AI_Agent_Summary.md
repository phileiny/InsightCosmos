# 5 å¤© AI Agent å­¸ç¿’æ—…ç¨‹ - å®Œæ•´ç¸½çµ

**èª²ç¨‹ï¼š** Kaggle Ã— Google - 5-Day AI Agents Intensive Course
**å­¸ç¿’æœŸé–“ï¼š** 2025-11-10 è‡³ 2025-11-14
**æ•´ç†è€…ï¼š** Ray å¼µç‘æ¶µ
**ç¸½å­¸ç¿’æ™‚æ•¸ï¼š** ç´„ 15 å°æ™‚

---

## ğŸ“– ç›®éŒ„

1. [èª²ç¨‹æ¦‚è¦½](#èª²ç¨‹æ¦‚è¦½)
2. [Day 1ï¼šAI Agent åŸºç¤èˆ‡æ¶æ§‹è¨­è¨ˆ](#day-1ai-agent-åŸºç¤èˆ‡æ¶æ§‹è¨­è¨ˆ)
3. [Day 2ï¼šå·¥å…·æ•´åˆèˆ‡ MCP å”å®š](#day-2å·¥å…·æ•´åˆèˆ‡-mcp-å”å®š)
4. [Day 3ï¼šä¸Šä¸‹æ–‡å·¥ç¨‹èˆ‡è¨˜æ†¶ç®¡ç†](#day-3ä¸Šä¸‹æ–‡å·¥ç¨‹èˆ‡è¨˜æ†¶ç®¡ç†)
5. [Day 4ï¼šå“è³ªè§€æ¸¬èˆ‡è©•ä¼°](#day-4å“è³ªè§€æ¸¬èˆ‡è©•ä¼°)
6. [Day 5ï¼šå¾åŸå‹åˆ°ç”Ÿç”¢ç’°å¢ƒ](#day-5å¾åŸå‹åˆ°ç”Ÿç”¢ç’°å¢ƒ)
7. [æ ¸å¿ƒæŠ€è¡“æ£§æ•´åˆ](#æ ¸å¿ƒæŠ€è¡“æ£§æ•´åˆ)
8. [æœ€ä½³å¯¦è¸ç¸½çµ](#æœ€ä½³å¯¦è¸ç¸½çµ)
9. [å»¶ä¼¸å­¸ç¿’è³‡æº](#å»¶ä¼¸å­¸ç¿’è³‡æº)
10. [å­¸ç¿’æˆæœèˆ‡æ‡‰ç”¨](#å­¸ç¿’æˆæœèˆ‡æ‡‰ç”¨)

---

## ğŸ¯ èª²ç¨‹æ¦‚è¦½

### å­¸ç¿’æ—…ç¨‹åœ°åœ–

é€™å€‹ç‚ºæœŸ 5 å¤©çš„å¯†é›†èª²ç¨‹å¸¶é ˜å­¸ç¿’è€…å¾é›¶é–‹å§‹ï¼Œé€æ­¥æŒæ¡ä¼æ¥­ç´š AI Agent é–‹ç™¼çš„å®Œæ•´ç”Ÿå‘½é€±æœŸï¼š

```
Day 1: Foundation        Day 2: Tools           Day 3: Context        Day 4: Quality        Day 5: Production
   åŸºç¤                    å·¥å…·                   ä¸Šä¸‹æ–‡                å“è³ª                  ç”Ÿç”¢
    â†“                      â†“                      â†“                     â†“                     â†“
Agent æ¶æ§‹           è‡ªè¨‚å·¥å…·é–‹ç™¼          Session ç®¡ç†          å¯è§€æ¸¬æ€§              A2A å”å®š
Think-Act-Observe    MCP æ•´åˆ              Memory ç³»çµ±           è©•ä¼°æ¡†æ¶              AgentOps
å¤š Agent æ¨¡å¼        é•·æ™‚é–“é‹è¡Œæ“ä½œ        ç‹€æ…‹ç®¡ç†              Logs/Traces/Metrics   Vertex AI éƒ¨ç½²
```

### èª²ç¨‹ç‰¹è‰²

- **ç†è«–èˆ‡å¯¦è¸ä¸¦é‡** - æ¯å¤©éƒ½åŒ…å«ç™½çš®æ›¸å­¸ç¿’ã€å°ˆå®¶åº§è«‡å’Œå¯¦ä½œç·´ç¿’
- **å®Œæ•´é–‹ç™¼ç”Ÿå‘½é€±æœŸ** - å¾åŸå‹é–‹ç™¼åˆ°ç”Ÿç”¢éƒ¨ç½²çš„å®Œæ•´æµç¨‹
- **ä¼æ¥­ç´šè¦–è§’** - æ¶µè“‹å®‰å…¨æ€§ã€å¯æ“´å±•æ€§ã€ç¶­é‹ç®¡ç†
- **Google æŠ€è¡“æ£§** - ä½¿ç”¨ ADK (Agent Development Kit) å’Œ Vertex AI

---

## ğŸ“˜ Day 1ï¼šAI Agent åŸºç¤èˆ‡æ¶æ§‹è¨­è¨ˆ

### æ ¸å¿ƒæ¦‚å¿µ

#### 1.1 AI Agent çš„æœ¬è³ª

**AI Agent â‰  LLM**ï¼Œè€Œæ˜¯ä¸€å€‹å®Œæ•´çš„è‡ªä¸»è»Ÿé«”ç³»çµ±ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          AI Agent ç³»çµ±               â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚Model â”‚   â”‚Tools â”‚   â”‚Orch. â”‚   â”‚
â”‚  â”‚ å¤§è…¦  â”‚   â”‚  æ‰‹  â”‚   â”‚ ç¥ç¶“  â”‚   â”‚
â”‚  â”‚      â”‚   â”‚      â”‚   â”‚ ç³»çµ±  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚           â”‚Deployâ”‚                 â”‚
â”‚           â”‚ èº«é«”  â”‚                 â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒæ¶æ§‹å››è¦ç´ ï¼š**

| çµ„ä»¶ | é¡æ¯” | åŠŸèƒ½æè¿° |
|------|------|---------|
| **Model** | å¤§è…¦ | æ ¸å¿ƒæ¨ç†å¼•æ“ - åˆ†æã€è¦åŠƒã€æ±ºç­– |
| **Tools** | æ‰‹ | é€£æ¥å¤–éƒ¨ä¸–ç•Œ - å­˜å–è³‡è¨Šã€åŸ·è¡Œå‹•ä½œ |
| **Orchestration Layer** | ç¥ç¶“ç³»çµ± | ç®¡ç† Think-Act-Observe å¾ªç’° |
| **Deployment** | èº«é«” | é›²ç«¯è¨—ç®¡ - æä¾›å¯æ“´å±•æœå‹™ |

#### 1.2 Think-Act-Observe å¾ªç’°

æ‰€æœ‰ AI Agent çš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼š

```
1. Get the Mission (æ¥æ”¶ä»»å‹™)
   â†“
2. Scan the Scene (æƒæç’°å¢ƒèˆ‡ä¸Šä¸‹æ–‡)
   â†“
3. Think It Through (æ¨ç†èˆ‡è¦åŠƒ)
   â†“
4. Take Action (ä½¿ç”¨å·¥å…·åŸ·è¡Œ)
   â†“
5. Observe & Iterate (è§€å¯Ÿå›é¥‹ï¼Œé‡æ–°æ¨ç†)
   â†“
   [å¾ªç’°ç›´åˆ°ä»»å‹™å®Œæˆ]
```

**é—œéµæ´å¯Ÿï¼š** Agent ä¸æ˜¯ã€Œä¸€æ¬¡æ€§å›æ‡‰ã€ï¼Œè€Œæ˜¯**æŒçºŒè¿­ä»£æ”¹é€²**çš„å•é¡Œè§£æ±ºéç¨‹ã€‚

#### 1.3 Agent èƒ½åŠ›åˆ†ç´š (Level 0-4)

| ç´šåˆ¥ | åç¨± | èƒ½åŠ›æè¿° | æ‡‰ç”¨å ´æ™¯ |
|------|------|---------|---------|
| **Level 0** | ç´”æ¨ç†æ¨¡å‹ | åƒ…ä¾è³´é è¨“ç·´çŸ¥è­˜ | æ–‡å­—ç”Ÿæˆã€åŸºç¤å•ç­” |
| **Level 1** | å·¥å…·é€£çµ Agent | å¯æŸ¥è©¢å³æ™‚è³‡è¨Šã€å‘¼å« API | æœå°‹åŠ©æ‰‹ã€è³‡æ–™æŸ¥è©¢ |
| **Level 2** | ç­–ç•¥å‹ Agent | å…·å‚™ä¸Šä¸‹æ–‡å·¥ç¨‹ã€å¤šæ­¥é©Ÿè¦åŠƒ | è¤‡é›œä»»å‹™è¦åŠƒã€æ±ºç­–ç³»çµ± |
| **Level 3** | å¤š Agent å”ä½œ | å°ˆå®¶åœ˜éšŠåˆ†å·¥ã€ç®¡ç†è€…å”èª¿ | ä¼æ¥­å·¥ä½œæµç¨‹ã€ç ”ç©¶ç³»çµ± |
| **Level 4** | è‡ªæˆ‘æ¼”åŒ–ç³»çµ± | è‡ªå‹•å‰µå»ºå·¥å…·å’Œæ–° Agent | AlphaEvolveã€Co-Scientist |

### å¤š Agent ç³»çµ±æ¶æ§‹

#### ç‚ºä»€éº¼éœ€è¦å¤š Agentï¼Ÿ

**å–®ä¸€ Agent çš„å±€é™ï¼š**
- æŒ‡ä»¤éé•·ä¸”è¤‡é›œï¼Œé›£ä»¥ç¶­è­·
- ç„¡æ³•ç¢ºå®šå¤±æ•—é»ï¼Œé™¤éŒ¯å›°é›£
- è·è²¬æ··é›œï¼Œå¯é æ€§é™ä½

**å¤š Agent ç³»çµ±çš„å„ªå‹¢ï¼š**
- **æ¨¡çµ„åŒ–è¨­è¨ˆ** - è·è²¬å–®ä¸€æ˜ç¢º
- **æ˜“æ–¼æ¸¬è©¦** - ç¨ç«‹æ¸¬è©¦å„çµ„ä»¶
- **å¯ç¶­è­·æ€§é«˜** - ä¿®æ”¹å½±éŸ¿ç¯„åœå°
- **å”ä½œå¢å¼·** - å°ˆå®¶åœ˜éšŠæ¯”å…¨èƒ½é¸æ‰‹æ›´å¯é 

#### å››ç¨®æ ¸å¿ƒæ¶æ§‹æ¨¡å¼

##### 1. LLM å”èª¿è€…ï¼ˆå‹•æ…‹æ±ºç­–ï¼‰

**é©ç”¨å ´æ™¯ï¼š** éœ€è¦éˆæ´»ã€å‹•æ…‹çš„ä»»å‹™åˆ†é…

```python
# å°ˆå®¶ Agent
research_agent = Agent(
    name="ResearchAgent",
    instruction="ä½¿ç”¨ google_search å°‹æ‰¾ç›¸é—œè³‡è¨Š",
    tools=[google_search],
    output_key="research_findings"
)

summarizer_agent = Agent(
    name="SummarizerAgent",
    instruction="é–±è®€ {research_findings}ï¼Œå»ºç«‹ç°¡æ½”æ‘˜è¦",
    output_key="final_summary"
)

# å”èª¿ Agent
root_agent = Agent(
    name="ResearchCoordinator",
    instruction="å…ˆå‘¼å« ResearchAgentï¼Œå†å‘¼å« SummarizerAgent",
    tools=[AgentTool(research_agent), AgentTool(summarizer_agent)]
)
```

**å„ªé»ï¼š** éˆæ´»ã€é©æ‡‰æ€§å¼·
**ç¼ºé»ï¼š** åŸ·è¡Œé †åºä¸å¯é æ¸¬

##### 2. Sequential Agentï¼ˆé †åºåŸ·è¡Œï¼‰

**é©ç”¨å ´æ™¯ï¼š** éœ€è¦ä¿è­‰åŸ·è¡Œé †åºçš„ç·šæ€§æµç¨‹

```python
from google.adk.agents import SequentialAgent

# å®šç¾©å„éšæ®µ Agent
outline_agent = Agent(name="OutlineAgent", instruction="å»ºç«‹å¤§ç¶±")
writer_agent = Agent(name="WriterAgent", instruction="æ’°å¯«å…§å®¹")
editor_agent = Agent(name="EditorAgent", instruction="ç·¨è¼¯æ½¤é£¾")

# å»ºç«‹é †åºå·¥ä½œæµç¨‹
root_agent = SequentialAgent(
    name="BlogPipeline",
    sub_agents=[outline_agent, writer_agent, editor_agent]
)
```

**å„ªé»ï¼š** ç¢ºå®šé †åºã€å¯é æ¸¬ã€æ˜“é™¤éŒ¯
**ç¼ºé»ï¼š** é€Ÿåº¦æ…¢ï¼ˆéœ€ç­‰å¾…å‰ä¸€æ­¥å®Œæˆï¼‰

##### 3. Parallel Agentï¼ˆä¸¦è¡ŒåŸ·è¡Œï¼‰

**é©ç”¨å ´æ™¯ï¼š** å¤šå€‹ç¨ç«‹ä»»å‹™éœ€åŒæ™‚åŸ·è¡Œ

```python
from google.adk.agents import ParallelAgent

# ä¸¦è¡Œç ”ç©¶ Agents
tech_researcher = Agent(name="TechResearcher", tools=[google_search])
health_researcher = Agent(name="HealthResearcher", tools=[google_search])
finance_researcher = Agent(name="FinanceResearcher", tools=[google_search])

# ä¸¦è¡ŒåŸ·è¡Œ
parallel_team = ParallelAgent(
    name="ParallelResearchTeam",
    sub_agents=[tech_researcher, health_researcher, finance_researcher]
)
```

**å„ªé»ï¼š** å¿«é€Ÿã€é«˜æ•ˆ
**ç¼ºé»ï¼š** ä¸é©ç”¨æ–¼ç›¸ä¾ä»»å‹™

##### 4. Loop Agentï¼ˆå¾ªç’°åŸ·è¡Œï¼‰

**é©ç”¨å ´æ™¯ï¼š** éœ€è¦è¿­ä»£æ”¹é€²çš„ä»»å‹™

```python
from google.adk.agents import LoopAgent

# è©•è«–èˆ‡æ”¹é€²å¾ªç’°
critic_agent = Agent(
    name="Critic",
    instruction="è©•è«–å…§å®¹ï¼Œè‹¥å¥½å‰‡èªª 'APPROVED'ï¼Œå¦å‰‡æä¾›æ”¹é€²å»ºè­°"
)

refiner_agent = Agent(
    name="Refiner",
    instruction="æ ¹æ“šè©•è«–æ”¹é€²å…§å®¹ï¼Œè‹¥ APPROVED å‰‡å‘¼å« exit_loop",
    tools=[FunctionTool(exit_loop)]
)

# çµ„åˆå¾ªç’°
refinement_loop = LoopAgent(
    name="RefinementLoop",
    sub_agents=[critic_agent, refiner_agent],
    max_iterations=3  # é˜²æ­¢ç„¡é™å¾ªç’°
)
```

**å„ªé»ï¼š** è¿­ä»£æ”¹é€²ã€å“è³ªä¿è­‰
**ç¼ºé»ï¼š** éœ€è¨­å®šæœ€å¤§æ¬¡æ•¸

#### æ¶æ§‹æ¨¡å¼é¸æ“‡æ±ºç­–æ¨¹

```
ä»»å‹™éœ€æ±‚ï¼Ÿ
â”œâ”€ å›ºå®šæµç¨‹ (Aâ†’Bâ†’C)
â”‚  â””â”€ ä½¿ç”¨ SequentialAgent
â”‚
â”œâ”€ ç¨ç«‹ä¸¦è¡Œä»»å‹™ (åŒæ™‚åŸ·è¡Œ A, B, C)
â”‚  â””â”€ ä½¿ç”¨ ParallelAgent
â”‚
â”œâ”€ è¿­ä»£æ”¹é€² (Aâ‡†B åè¦†å„ªåŒ–)
â”‚  â””â”€ ä½¿ç”¨ LoopAgent
â”‚
â””â”€ å‹•æ…‹æ±ºç­– (è®“ LLM æ±ºå®š)
   â””â”€ ä½¿ç”¨ LLM Orchestrator
```

### Day 1 é—œéµæ”¶ç©«

âœ… **æ¦‚å¿µçªç ´ï¼š** AI Agent ä¸æ˜¯èŠå¤©æ©Ÿå™¨äººï¼Œè€Œæ˜¯å…·å‚™è‡ªä¸»å•é¡Œè§£æ±ºèƒ½åŠ›çš„å®Œæ•´è»Ÿé«”ç³»çµ±
âœ… **æ¶æ§‹æ€ç¶­ï¼š** å¾ã€Œå–®ä¸€å…¨èƒ½ Agentã€è½‰å‘ã€Œå°ˆå®¶åœ˜éšŠå”ä½œã€çš„è¨­è¨ˆå“²å­¸
âœ… **å·¥ç¨‹å¯¦è¸ï¼š** æŒæ¡å¾ç†è«–åˆ°å¯¦ä½œçš„å®Œæ•´é–‹ç™¼æµç¨‹

---

## ğŸ”§ Day 2ï¼šå·¥å…·æ•´åˆèˆ‡ MCP å”å®š

### æ ¸å¿ƒæ¦‚å¿µ

#### 2.1 å¾ LLM åˆ° Agent çš„æ¼”é€²

```
LLM (å¤§å‹èªè¨€æ¨¡å‹) = åªæœƒã€Œæƒ³ã€ï¼ˆæ¨ç†èˆ‡è¦åŠƒï¼‰
                    â†“
Agent = æœƒã€Œæƒ³ã€+ æœƒã€Œåšã€ï¼ˆé€éå·¥å…·åŸ·è¡Œå‹•ä½œï¼‰
```

**ç‚ºä»€éº¼ Agent éœ€è¦å·¥å…·ï¼Ÿ**

æ²’æœ‰å·¥å…·ï¼ŒLLM çš„çŸ¥è­˜å‡çµåœ¨è¨“ç·´æ™‚é–“é»ï¼Œç„¡æ³•ï¼š
- å­˜å–å³æ™‚è³‡è¨Šï¼ˆæ–°èã€åº«å­˜ï¼‰
- åŸ·è¡Œç¾å¯¦ä¸–ç•Œçš„å‹•ä½œï¼ˆç™¼é€éƒµä»¶ã€é è¨‚æœƒè­°ï¼‰

#### 2.2 ä¸‰ç¨®å·¥å…·é¡å‹

| é¡å‹ | èªªæ˜ | ç¯„ä¾‹ |
|-----|------|------|
| **Function Tools** | è‡ªè¨‚ Python å‡½æ•¸ | `get_exchange_rate()`, `calculate_fee()` |
| **Built-in Tools** | å¹³å°å…§å»ºå·¥å…· | Google Search, Code Executor |
| **Agent Tools** | å°‡å…¶ä»– Agent ä½œç‚ºå·¥å…· | ä¸» Agent å§”æ´¾çµ¦å°ˆå®¶ Agent |

#### 2.3 å·¥å…·è¨­è¨ˆ 5 æ¢é»ƒé‡‘æº–å‰‡

1. **æ–‡ä»¶å³åˆç´„** - æ¸…æ¥šçš„åç¨±ã€æè¿°ã€åƒæ•¸èªªæ˜
2. **æè¿°ä»»å‹™ï¼Œéå¯¦ä½œç´°ç¯€** - è®“ LLM è² è²¬ã€Œæƒ³ã€ï¼Œå·¥å…·è² è²¬ã€Œåšã€
3. **ä»»å‹™ç´šå°è£** - æš´éœ²ã€Œå¯ç”¨ä»»å‹™ã€è€Œéä½å±¤ API
4. **è¼¸å‡ºè¦ç²¾ç°¡** - é¿å…å¤§é‡åŸå§‹è³‡æ–™å¡å›ä¸Šä¸‹æ–‡
5. **éŒ¯èª¤è¦å¯æ¢å¾©** - æä¾›å¯æŒ‡å°ä¿®æ­£çš„éŒ¯èª¤è¨Šæ¯

### MCP (Model Context Protocol)

#### 2.4 MCP æ˜¯ä»€éº¼ï¼Ÿ

ä¸€å€‹**é–‹æ”¾æ¨™æº–**ï¼Œè®“ AI Agent èƒ½ä»¥çµ±ä¸€ä»‹é¢é€£æ¥å¤–éƒ¨å·¥å…·èˆ‡æœå‹™ã€‚

**æ ¸å¿ƒæ¶æ§‹ï¼š**

```
Host (ä¸»ç¨‹å¼) â† Client (é€šè¨Šæ¨¡çµ„) â†’ Server (å·¥å…·ä¾›æ‡‰ç«¯)
                  â†“
              JSON-RPC 2.0
                  â†“
         stdio / Streamable HTTP
```

**MCP å„ªå‹¢ï¼š**
- âœ… **æ¨™æº–åŒ–æ•´åˆ** - é™ä½ NÃ—M å®¢è£½æ•´åˆæˆæœ¬
- âœ… **ç”Ÿæ…‹ç³»é‡ç”¨** - ä½¿ç”¨ç¤¾ç¾¤å·²å»ºç«‹çš„å·¥å…·
- âœ… **å¯æ›¿æ›æ¶æ§‹** - æ¨¡å‹èˆ‡å¹³å°å¯éˆæ´»æ›¿æ›

#### 2.5 MCP å·¥å…·å®šç¾©è¦é»

```python
{
    "name": "getTinyImage",              # å·¥å…·åç¨±
    "description": "ç”Ÿæˆå°åœ–ç‰‡",          # æ¸…æ¥šæè¿°
    "inputSchema": {                     # å¿…å¡« - å®šç¾©è¼¸å…¥æ ¼å¼
        "type": "object",
        "properties": {
            "width": {"type": "number"},
            "height": {"type": "number"}
        }
    },
    "outputSchema": {...}                # é¸å¡«ï¼Œå»ºè­°æä¾›
}
```

**éŒ¯èª¤è™•ç†ï¼š** `isError=true` + å¯æ¢å¾©è¨Šæ¯

### é•·æ™‚é–“é‹è¡Œæ“ä½œ (LRO)

#### 2.6 æš«åœèˆ‡æ¢å¾©æ©Ÿåˆ¶

**ä½¿ç”¨å ´æ™¯ï¼š** éœ€è¦äººå·¥å¯©æ‰¹çš„æ“ä½œ

```python
def place_shipping_order(num_containers: int, tool_context: ToolContext):
    # å ´æ™¯ 1: å°è¨‚å–® - ç›´æ¥æ‰¹å‡†
    if num_containers <= 5:
        return {"status": "approved"}

    # å ´æ™¯ 2: ç¬¬ä¸€æ¬¡å‘¼å« - è«‹æ±‚æ‰¹å‡†
    if not tool_context.tool_confirmation:
        tool_context.request_confirmation(hint="éœ€è¦æ‰¹å‡†")
        return {"status": "pending"}

    # å ´æ™¯ 3: æ¢å¾©åŸ·è¡Œ - è™•ç†æ‰¹å‡†çµæœ
    if tool_context.tool_confirmation.confirmed:
        return {"status": "approved"}
```

**å¯æ¢å¾© Appï¼š**

```python
shipping_app = App(
    root_agent=shipping_agent,
    resumability_config=ResumabilityConfig(is_resumable=True)
)
```

### å¯¦ä½œè¦é»

#### è‡ªè¨‚ Function Tools

```python
def get_exchange_rate(base_currency: str, target_currency: str) -> dict:
    """æŸ¥è©¢åŒ¯ç‡ - æ¸…æ¥šçš„ docstring èªªæ˜å·¥å…·ç”¨é€”"""
    # å¯¦éš›æ‡‰ç”¨æœƒå‘¼å«çœŸå¯¦ API
    return {"status": "success", "rate": 0.93}

# Agent ä½¿ç”¨å·¥å…·
currency_agent = LlmAgent(
    tools=[get_exchange_rate, get_fee_for_payment_method]
)
```

#### Agent ä½œç‚ºå·¥å…·

```python
# å»ºç«‹å°ˆé–€çš„è¨ˆç®— Agent
calculation_agent = LlmAgent(
    name="CalculationAgent",
    instruction="åŸ·è¡Œæ•¸å­¸è¨ˆç®—"
)

# ä¸» Agent ä½¿ç”¨å­ Agent
main_agent = LlmAgent(
    tools=[AgentTool(agent=calculation_agent)]
)
```

#### MCP æ•´åˆ

```python
# é€£æ¥ MCP Server
mcp_toolset = McpToolset(
    server="@modelcontextprotocol/server-everything"
)

# ä½¿ç”¨ MCP å·¥å…·
agent = LlmAgent(
    tools=[mcp_toolset]
)
```

### ä¼æ¥­ç´šè€ƒé‡

#### å®‰å…¨èˆ‡æ²»ç†

**Confused Deputy é¢¨éšªï¼š** ä½æ¬Šé™ç”¨æˆ¶èª˜ä½¿ AI åŸ·è¡Œé«˜æ¬Šé™æ“ä½œ

**è§£æ±ºæ–¹æ¡ˆï¼š**
- åœ¨ MCP å¤–å±¤åŠ  **API Gateway**
- å¯¦æ–½ç´°ç²’åº¦æˆæ¬Š (RBAC/ABAC)
- å¼·åˆ¶ Human-in-the-Loop (HITL) å¯©æ‰¹
- ç¨½æ ¸æ—¥èªŒèˆ‡é™æ¸¬

#### è¦æ¨¡åŒ–æŒ‘æˆ°

**å•é¡Œï¼š** å¤§é‡å·¥å…·å°è‡´ Context è†¨è„¹

**è§£æ³•ï¼š** **Tool Retrieval**ï¼ˆé¡ä¼¼ RAGï¼Œå…ˆæª¢ç´¢å†è¼‰å…¥ï¼‰

### Day 2 é—œéµæ”¶ç©«

âœ… **ç†è§£ LLM èˆ‡ Agent çš„å·®ç•°**
âœ… **æŒæ¡å·¥å…·è¨­è¨ˆçš„æœ€ä½³å¯¦å‹™**
âœ… **èƒ½å¤ æ•´åˆ MCP å¤–éƒ¨æœå‹™**
âœ… **å¯¦ä½œé•·æ™‚é–“é‹è¡Œæ“ä½œèˆ‡äººå·¥å¯©æ‰¹**
âœ… **ç†è§£ä¼æ¥­ç´šå®‰å…¨èˆ‡æ²»ç†è€ƒé‡**

---

## ğŸ’¾ Day 3ï¼šä¸Šä¸‹æ–‡å·¥ç¨‹èˆ‡è¨˜æ†¶ç®¡ç†

### æ ¸å¿ƒæ¦‚å¿µ

#### 3.1 æƒ…å¢ƒå·¥ç¨‹ï¼ˆContext Engineeringï¼‰

**å®šç¾©ï¼š** å‹•æ…‹çµ„è£å’Œç®¡ç† LLM ä¸Šä¸‹æ–‡çª—å£ä¸­è³‡è¨Šçš„éç¨‹

**ç‚ºä»€éº¼é‡è¦ï¼Ÿ**
- LLM æœ¬è³ªä¸Šæ˜¯**ç„¡ç‹€æ…‹çš„**
- å…¶æ„ŸçŸ¥åƒ…é™æ–¼å–®ä¸€ API å‘¼å«çš„ã€Œä¸Šä¸‹æ–‡çª—å£ã€
- CE è®“ Agent èƒ½å¤ **è¨˜æ†¶ã€å­¸ç¿’å’Œå€‹äººåŒ–äº’å‹•**

#### 3.2 æƒ…å¢ƒçµ„ä»¶ä¸‰å¤§é¡

| çµ„ä»¶é¡å‹ | å…§å®¹ | ç”¨é€” |
|---------|------|------|
| **æ¨ç†æŒ‡å°** | ç³»çµ±æŒ‡ä»¤ã€å·¥å…·å®šç¾©ã€å°‘æ¨£æœ¬ç¯„ä¾‹ | æŒ‡å° Agent å¦‚ä½•æ€è€ƒ |
| **è­‰æ“šæ•¸æ“š** | é•·æœŸè¨˜æ†¶ã€å¤–éƒ¨çŸ¥è­˜ï¼ˆRAGï¼‰ | æä¾›äº‹å¯¦ä¾æ“š |
| **å³æ™‚è³‡è¨Š** | å°è©±æ­·å²ã€State/Scratchpad | ç¶­æŒå°è©±é€£è²«æ€§ |

#### 3.3 æƒ…å¢ƒç®¡ç†å¾ªç’°

```
1. Fetch Context (ç²å–ä¸Šä¸‹æ–‡)
   â†“ [æª¢ç´¢è¨˜æ†¶ã€RAGã€å°è©±æ­·å²]
2. Prepare Context (æº–å‚™ä¸Šä¸‹æ–‡)
   â†“ [å‹•æ…‹æ§‹å»ºå®Œæ•´æç¤º - é˜»å¡æ€§æ“ä½œ]
3. Invoke (èª¿ç”¨ LLM å’Œå·¥å…·)
   â†“ [è¿­ä»£åŸ·è¡Œ]
4. Upload Context (ä¸Šå‚³ä¸Šä¸‹æ–‡)
   â†“ [éåŒæ­¥èƒŒæ™¯å„²å­˜æ–°è³‡è¨Š]
```

**é—œéµæ´å¯Ÿï¼š**
- æ­¥é©Ÿ 1-3 åœ¨ã€Œç†±è·¯å¾‘ã€ä¸Šï¼Œå¿…é ˆå¿«é€Ÿ
- æ­¥é©Ÿ 4 æ‡‰åœ¨èƒŒæ™¯éåŒæ­¥åŸ·è¡Œ

### Sessionï¼ˆæœƒè©±ï¼‰ï¼šç•¶ä¸‹çš„å·¥ä½œå°

#### 3.4 Session çš„æœ¬è³ª

**å®šç¾©ï¼š** å–®ä¸€ã€é€£çºŒå°è©±çš„å³æ™‚å®¹å™¨

**çµ„æˆéƒ¨åˆ†ï¼š**

```python
Session {
    events: [                        # æ™‚é–“é †åºçš„å°è©±è¨˜éŒ„
        Event(type="user_input"),
        Event(type="agent_response"),
        Event(type="tool_call"),
        Event(type="tool_output")
    ],
    state: {                         # çµæ§‹åŒ–çš„å·¥ä½œè¨˜æ†¶
        "user:name": "Sam",
        "cart:items": [...]
    }
}
```

#### 3.5 Session ç®¡ç†å¯¦ä½œ

**åˆå§‹åŒ– Session Serviceï¼š**

```python
from google.adk.sessions import DatabaseSessionService

# ä½¿ç”¨ SQLite è³‡æ–™åº«æŒä¹…åŒ–
db_url = "sqlite:///my_agent_data.db"
session_service = DatabaseSessionService(db_url=db_url)

runner = Runner(
    agent=chatbot_agent,
    app_name="MyApp",
    session_service=session_service
)
```

**SessionService é¡å‹æ¯”è¼ƒï¼š**

| Service | æŒä¹…æ€§ | é©ç”¨å ´æ™¯ |
|---------|--------|----------|
| **InMemorySessionService** | âŒ | å¿«é€ŸåŸå‹é–‹ç™¼ |
| **DatabaseSessionService** | âœ… | ä¸­å°å‹æ‡‰ç”¨ |
| **Agent Engine Sessions** | âœ… | ä¼æ¥­ç´šè¦æ¨¡ |

#### 3.6 Context Compactionï¼ˆä¸Šä¸‹æ–‡å£“ç¸®ï¼‰

**å•é¡Œï¼š** é•·å°è©± = å¤§é‡ Events â†’ æ•ˆèƒ½é™ä½ + æˆæœ¬å¢åŠ 

**è§£æ±ºæ–¹æ¡ˆï¼š**

```python
from google.adk.apps.app import App, EventsCompactionConfig

app_with_compaction = App(
    name="research_app",
    root_agent=chatbot_agent,
    events_compaction_config=EventsCompactionConfig(
        compaction_interval=3,  # æ¯ 3 æ¬¡å°è©±å¾Œè§¸ç™¼å£“ç¸®
        overlap_size=1          # ä¿ç•™ 1 æ¬¡å°è©±ä½œç‚ºé‡ç–Š
    )
)
```

**å£“ç¸®ç­–ç•¥æ¯”è¼ƒï¼š**

| ç­–ç•¥ | æ–¹æ³• | å„ªé» | ç¼ºé» |
|------|------|------|------|
| **ä¿ç•™æœ€å¾Œ N è¼ª** | åƒ…ä¿ç•™æœ€è¿‘å°è©± | ç°¡å–®ã€å¿«é€Ÿ | å¯èƒ½éºå¤±é‡è¦æ­·å² |
| **Token æˆªæ–·** | è¨ˆç®— token æ•¸é™åˆ¶ | å¯é æ¸¬æˆæœ¬ | æ©Ÿæ¢°å¼åˆ‡å‰² |
| **éæ­¸ç¸½çµ** | AI ç”Ÿæˆæ­·å²æ‘˜è¦ | ä¿ç•™é—œéµè³‡è¨Š | è¨ˆç®—æˆæœ¬é«˜ |

#### 3.7 Session State ç®¡ç†

**å»ºç«‹è‡ªè¨‚å·¥å…·ï¼š**

```python
def save_userinfo(tool_context: ToolContext, user_name: str, country: str):
    """å„²å­˜ç”¨æˆ¶è³‡è¨Šåˆ° Session State"""
    tool_context.state["user:name"] = user_name
    tool_context.state["user:country"] = country
    return {"status": "success"}

def retrieve_userinfo(tool_context: ToolContext):
    """å¾ Session State æª¢ç´¢ç”¨æˆ¶è³‡è¨Š"""
    return {
        "user_name": tool_context.state.get("user:name"),
        "country": tool_context.state.get("user:country")
    }
```

### Memoryï¼ˆè¨˜æ†¶ï¼‰ï¼šè·¨ Session çš„æŒä¹…åŒ–çŸ¥è­˜

#### 3.8 Memory çš„æ ¸å¿ƒåƒ¹å€¼

**å®šç¾©ï¼š** å¾å°è©±æˆ–æ•¸æ“šä¸­æå–å’Œæ•´åˆçš„æœ‰æ„ç¾©è³‡è¨Šå¿«ç…§

**ä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½ï¼š**

```
1. å€‹äººåŒ– (Personalization)
   â””â”€ è¨˜ä½ç”¨æˆ¶åå¥½ã€ç¿’æ…£ã€ç‰¹å¾µ

2. ä¸Šä¸‹æ–‡çª—å£ç®¡ç† (Context Window Management)
   â””â”€ é€éæ‘˜è¦å’Œäº‹å¯¦æå–ç¸®æ¸› token ä½¿ç”¨

3. Agent è‡ªæˆ‘æ”¹é€² (Self-Improvement)
   â””â”€ è¨˜éŒ„æˆåŠŸç­–ç•¥ï¼ˆç¨‹åºæ€§è¨˜æ†¶ï¼‰
```

#### 3.9 Memory vs RAG çš„é—œéµå·®ç•°

| ç‰¹å¾µ | RAG å¼•æ“ | Memory ç®¡ç†å™¨ |
|------|---------|--------------|
| **ä¸»è¦ç›®æ¨™** | æ³¨å…¥å¤–éƒ¨äº‹å¯¦æ€§çŸ¥è­˜ | å‰µé€ å€‹äººåŒ–é«”é©— |
| **æ•¸æ“šæº** | éœæ…‹å¤–éƒ¨æ–‡ä»¶ | **ç”¨æˆ¶å°è©±** |
| **éš”é›¢ç´šåˆ¥** | å…±äº«ï¼ˆGlobalï¼‰ | **é«˜åº¦éš”é›¢ï¼ˆPer-Userï¼‰** |
| **ä½œç”¨** | ä½¿ Agent æˆç‚º**äº‹å¯¦å°ˆå®¶** | ä½¿ Agent æˆç‚º**ä½¿ç”¨è€…å°ˆå®¶** |
| **æ›´æ–°é »ç‡** | ä½ï¼ˆé å…ˆç´¢å¼•ï¼‰ | é«˜ï¼ˆæŒçºŒå­¸ç¿’ï¼‰ |

**é¡æ¯”ç†è§£ï¼š**
- RAG = æŸ¥é–±ç™¾ç§‘å…¨æ›¸ï¼ˆäº‹å¯¦æŸ¥è©¢ï¼‰
- Memory = èˆ‡è€æœ‹å‹å°è©±ï¼ˆå€‹äººåŒ–äº’å‹•ï¼‰

#### 3.10 Memory å·¥ä½œæµç¨‹

**ä¸‰æ­¥é©Ÿæµç¨‹ï¼š**

```
1. Initializeï¼ˆåˆå§‹åŒ–ï¼‰
   â””â”€ å»ºç«‹ MemoryService ä¸¦æä¾›çµ¦ Agent

2. Ingestï¼ˆæ”å–ï¼‰
   â””â”€ ä½¿ç”¨ add_session_to_memory() å°‡ Session è½‰åŒ–ç‚º Memory

3. Retrieveï¼ˆæª¢ç´¢ï¼‰
   â””â”€ ä½¿ç”¨ search_memory() æˆ–å·¥å…·æª¢ç´¢è¨˜æ†¶
```

**å¯¦ä½œç¯„ä¾‹ï¼š**

```python
from google.adk.memory import InMemoryMemoryService

# 1. åˆå§‹åŒ– Memory Service
memory_service = InMemoryMemoryService()

runner = Runner(
    agent=user_agent,
    session_service=session_service,
    memory_service=memory_service
)

# 2. æ”å– Session è³‡æ–™
session = await session_service.get_session(...)
await memory_service.add_session_to_memory(session)

# 3. æª¢ç´¢è¨˜æ†¶
search_response = await memory_service.search_memory(
    query="What is the user's favorite color?"
)
```

#### 3.11 è¨˜æ†¶æª¢ç´¢ç­–ç•¥

**Option 1: load_memoryï¼ˆåæ‡‰å¼ï¼‰**

```python
from google.adk.tools import load_memory

user_agent = LlmAgent(
    instruction="ä½¿ç”¨ load_memory å·¥å…·åœ¨éœ€è¦æ™‚å›æ†¶éå»å°è©±",
    tools=[load_memory]  # Agent è‡ªè¡Œæ±ºå®šä½•æ™‚æœå°‹
)
```

**ç‰¹é»ï¼š**
- âœ… æ›´é«˜æ•ˆï¼ˆç¯€çœ tokensï¼‰
- âš ï¸ Agent å¯èƒ½å¿˜è¨˜æœå°‹

**Option 2: preload_memoryï¼ˆä¸»å‹•å¼ï¼‰**

```python
from google.adk.tools import preload_memory

auto_memory_agent = LlmAgent(
    instruction="å›ç­”ç”¨æˆ¶å•é¡Œ",
    tools=[preload_memory]  # æ¯æ¬¡å°è©±å‰è‡ªå‹•è¼‰å…¥
)
```

**ç‰¹é»ï¼š**
- âœ… ä¿è­‰ Memory å¯ç”¨
- âš ï¸ æ•ˆç‡è¼ƒä½ï¼ˆå³ä½¿ä¸éœ€è¦ä¹Ÿæœƒæœå°‹ï¼‰

#### 3.12 è‡ªå‹•åŒ– Memory å„²å­˜

**ä½¿ç”¨ Callbacksï¼š**

```python
async def auto_save_to_memory(callback_context):
    """æ¯æ¬¡ Agent å›åˆå¾Œè‡ªå‹•å„²å­˜ Session åˆ° Memory"""
    await callback_context._invocation_context.memory_service.add_session_to_memory(
        callback_context._invocation_context.session
    )

auto_memory_agent = LlmAgent(
    tools=[preload_memory],
    after_agent_callback=auto_save_to_memory  # è‡ªå‹•å„²å­˜ï¼
)
```

**Callback é¡å‹å®Œæ•´åˆ—è¡¨ï¼š**

| Callback | è§¸ç™¼æ™‚æ©Ÿ | ç”¨é€” |
|----------|---------|------|
| `before_agent_callback` | Agent è™•ç†å‰ | å‰ç½®æº–å‚™ã€é©—è­‰ |
| `after_agent_callback` | Agent å®Œæˆå¾Œ | è‡ªå‹•å„²å­˜ã€æ—¥èªŒè¨˜éŒ„ |
| `before_tool_callback` | å·¥å…·èª¿ç”¨å‰ | æ¬Šé™æª¢æŸ¥ |
| `after_tool_callback` | å·¥å…·èª¿ç”¨å¾Œ | çµæœè™•ç† |
| `before_model_callback` | LLM èª¿ç”¨å‰ | æç¤ºä¿®æ”¹ |
| `after_model_callback` | LLM èª¿ç”¨å¾Œ | å›æ‡‰éæ¿¾ |

#### 3.13 Memory Consolidationï¼ˆè¨˜æ†¶æ•´åˆï¼‰

**å•é¡Œï¼š** åŸå§‹ Session å†—é•·ï¼ŒåŒ…å«å¤§é‡é‡è¤‡å’Œå™ªéŸ³

**æ•´åˆå‰å¾Œå°æ¯”ï¼š**

```
ã€æ•´åˆå‰ã€‘
User: "My favorite color is BlueGreen. I also like purple.
       Actually, I prefer BlueGreen most of the time."
Agent: "Great! I'll remember that."
User: "Thanks!"
Agent: "You're welcome!"

â†’ å„²å­˜å…¨éƒ¨ 4 å‰‡è¨Šæ¯ï¼ˆå†—é¤˜ã€å†—é•·ï¼‰

ã€æ•´åˆå¾Œã€‘
Memory: "User's favorite color: BlueGreen"

â†’ å„²å­˜ 1 å€‹ç°¡æ½”çš„äº‹å¯¦
```

**æ•´åˆæµç¨‹ï¼š**

```
åŸå§‹ Session Events
    â†“
LLM åˆ†æå°è©±
    â†“
æå–é—œéµäº‹å¯¦ï¼ˆä¿¡è™Ÿ vs å™ªéŸ³ï¼‰
    â†“
å„²å­˜ç°¡æ½”çš„è¨˜æ†¶
    â†“
èˆ‡ç¾æœ‰è¨˜æ†¶åˆä½µï¼ˆå»é‡ã€è§£æ±ºè¡çªï¼‰
```

**æ•´åˆæ“ä½œï¼š**
- **CREATE** - å»ºç«‹æ–°è¨˜æ†¶
- **UPDATE** - æ›´æ–°ç¾æœ‰è¨˜æ†¶
- **DELETE/INVALIDATE** - åˆªé™¤æˆ–ä½œå»¢éæ™‚è¨˜æ†¶

### Day 3 é—œéµæ”¶ç©«

âœ… **ç†è§£æƒ…å¢ƒå·¥ç¨‹çš„æœ¬è³ªå’Œé‡è¦æ€§**
âœ… **æŒæ¡ Session å’Œ Memory çš„å€åˆ¥èˆ‡æ‡‰ç”¨**
âœ… **èƒ½å»ºç«‹æŒä¹…åŒ–çš„æœƒè©±ç®¡ç†ç³»çµ±**
âœ… **å¯¦ä½œä¸Šä¸‹æ–‡å£“ç¸®å’Œè¨˜æ†¶æ•´åˆ**
âœ… **ç†è§£ RAG èˆ‡ Memory çš„å”åŒä½¿ç”¨**

---

## ğŸ“Š Day 4ï¼šå“è³ªè§€æ¸¬èˆ‡è©•ä¼°

### æ ¸å¿ƒæ¦‚å¿µ

#### 4.1 Agent Quality çš„å…¸ç¯„è½‰ç§»

**å‚³çµ±è»Ÿé«” vs AI Agentï¼š**

| é¢å‘ | å‚³çµ±è»Ÿé«” | AI Agent |
|------|---------|----------|
| **è¡Œç‚ºç‰¹æ€§** | ç¢ºå®šæ€§ã€å¯é æ¸¬ | éç¢ºå®šæ€§ã€ä¸å¯é æ¸¬ |
| **å¤±æ•—æ¨¡å¼** | æ˜ç¢ºå´©æ½°ï¼ˆ500 éŒ¯èª¤ï¼‰ | å¾®å¦™é€€åŒ–ï¼ˆå¹»è¦ºã€æ¼‚ç§»ï¼‰ |
| **å“è³ªä¿è­‰** | æ¸¬è©¦éšæ®µé©—è­‰ | æ¶æ§‹æ”¯æŸ±ï¼Œå¾è¨­è¨ˆé–‹å§‹ |
| **è©•ä¼°é‡é»** | "å»ºå°äº†å—ï¼Ÿ" | "å»ºå°çš„äº†å—ï¼Ÿ" |

#### 4.2 Agent Quality çš„å››å¤§æ”¯æŸ±

1. **æœ‰æ•ˆæ€§ï¼ˆEffectivenessï¼‰**
   - Agent æ˜¯å¦æˆåŠŸå¯¦ç¾ç”¨æˆ¶çš„å¯¦éš›æ„åœ–ï¼Ÿ
   - è©•ä¼°æœ€çµ‚çš„ã€Œé»‘ç®±ã€çµæœ

2. **æ•ˆç‡ï¼ˆEfficiencyï¼‰**
   - æ˜¯å¦ç”¨æœ€å°‘è³‡æºè§£æ±ºå•é¡Œï¼Ÿ
   - è¡¡é‡ï¼šç¸½ä»£å¹£é‡ã€å»¶é²ã€è»Œè·¡è¤‡é›œåº¦

3. **ç©©å¥æ€§ï¼ˆRobustnessï¼‰**
   - å¦‚ä½•æ‡‰å°çœŸå¯¦ä¸–ç•Œçš„æ··äº‚ï¼Ÿ
   - å„ªé›…å¤±æ•— vs å´©æ½°æˆ–å¹»è¦º

4. **å®‰å…¨èˆ‡ä¸€è‡´æ€§ï¼ˆSafety & Alignmentï¼‰**
   - æ˜¯å¦åœ¨é“å¾·é‚Šç•Œå’Œç´„æŸå…§é‹ä½œï¼Ÿ
   - åŒ…æ‹¬è² è²¬ä»» AI å’Œé˜²ç¯„æç¤ºæ³¨å…¥

### å¯è§€æ¸¬æ€§ï¼šä¸‰å¤§æ”¯æŸ±

#### 4.3 æ—¥èªŒï¼ˆLogsï¼‰ï¼šAgent çš„ã€Œæ—¥è¨˜ã€

**å®šç¾©ï¼š** è¨˜éŒ„é›¢æ•£äº‹ä»¶çš„åŸå§‹ã€ä¸å¯è®Šäº‹å¯¦

**ä½œç”¨ï¼š** å›ç­”ã€Œç™¼ç”Ÿäº†ä»€éº¼äº‹ï¼Ÿã€

**é—œéµè¦ç´ ï¼š**
- çµæ§‹åŒ– JSON æ ¼å¼
- å®Œæ•´ä¸Šä¸‹æ–‡ï¼ˆæç¤º/å›æ‡‰é…å°ï¼‰
- ä¸­é–“æ¨ç†æ­¥é©Ÿï¼ˆæ€ç¶­éˆï¼‰
- çµæ§‹åŒ–å·¥å…·å‘¼å«ï¼ˆè¼¸å…¥ã€è¼¸å‡ºã€éŒ¯èª¤ï¼‰

**å¯¦ä½œï¼š**

```python
import logging

logging.basicConfig(
    filename="logger.log",
    level=logging.DEBUG,
    format="%(filename)s:%(lineno)s %(levelname)s:%(message)s"
)
```

#### 4.4 è¿½è¹¤ï¼ˆTracesï¼‰ï¼šè¡Œå‹•çš„ã€Œå› æœé—œä¿‚ã€æ•˜äº‹

**å®šç¾©ï¼š** å°‡å€‹åˆ¥æ—¥èªŒæ¢ç›®é€£æ¥æˆé€£è²«æ•…äº‹çš„æ•˜äº‹ç·šç´¢

**ä½œç”¨ï¼š** å›ç­”ã€Œç‚ºä»€éº¼ç™¼ç”Ÿï¼Ÿã€

**é—œéµç‰¹æ€§ï¼š**
- è·Ÿéš¨å–®ä¸€ä»»å‹™çš„å®Œæ•´éç¨‹
- æ­ç¤ºäº‹ä»¶é–“çš„å› æœé—œä¿‚
- åŸºæ–¼ OpenTelemetry æ¨™æº–
- é€šé `trace_id` é€£çµæ“ä½œ
- é™„å¸¶è±å¯Œå…ƒæ•¸æ“šï¼ˆå»¶é²ã€ä»£å¹£è¨ˆæ•¸ï¼‰

**è¨ºæ–·åƒ¹å€¼ï¼š** æ­ç¤ºå®Œæ•´å› æœéˆï¼ˆä¾‹å¦‚ï¼šRAG æœç´¢å¤±æ•— â†’ å¾ŒçºŒå·¥å…·å‘¼å«å•é¡Œï¼‰

#### 4.5 æŒ‡æ¨™ï¼ˆMetricsï¼‰ï¼šæ€§èƒ½çš„ã€Œå¥åº·å ±å‘Šã€

**å®šç¾©ï¼š** å°æ—¥èªŒå’Œè¿½è¹¤æ•¸æ“šèšåˆå¾Œçš„é‡åŒ–å¥åº·è©•åˆ†

**ä½œç”¨ï¼š** å›ç­”ã€Œå¹³å‡è¡¨ç¾å¦‚ä½•ï¼Ÿã€

**é¡å‹ï¼š**

| æŒ‡æ¨™é¡å‹ | å…§å®¹ | ç¯„ä¾‹ |
|---------|------|------|
| **ç³»çµ±æŒ‡æ¨™** | ç‡Ÿé‹å¥åº·ç‹€æ³ | å»¶é²ï¼ˆP50/P99ï¼‰ã€éŒ¯èª¤ç‡ã€æ¯ä»»å‹™ä»£å¹£é‡ |
| **å“è³ªæŒ‡æ¨™** | æ¨ç†å’Œè¼¸å‡ºå“è³ª | æ­£ç¢ºæ€§ã€è»Œè·¡éµå¾ªåº¦ã€å¹«åŠ©æ€§è©•åˆ†ã€å¹»è¦ºç‡ |

### è©•ä¼°è—è¡“

#### 4.6 ç”±å¤–è€Œå…§çš„è©•ä¼°å±¤æ¬¡

**éšæ®µ 1ï¼šé»‘ç®±è¦–åœ–ï¼ˆOutside-Inï¼‰**

**é‡é»ï¼š** è©•ä¼°æœ€çµ‚è¼¸å‡º

**é—œæ³¨æŒ‡æ¨™ï¼š**
- ä»»å‹™æˆåŠŸç‡
- ç”¨æˆ¶æ»¿æ„åº¦

**éšæ®µ 2ï¼šç»ç’ƒç®±è¦–åœ–ï¼ˆInside-Outï¼‰**

**é‡é»ï¼š** ç³»çµ±æ€§è©•ä¼°åŸ·è¡Œè»Œè·¡

**æª¢æŸ¥è¦é»ï¼š**
1. **LLM è¦åŠƒ** - æ ¸å¿ƒæ¨ç†æ˜¯å¦æ­£ç¢ºï¼Ÿ
2. **å·¥å…·ä½¿ç”¨** - æ˜¯å¦é¸æ“‡æ­£ç¢ºçš„å·¥å…·ï¼Ÿ
3. **å·¥å…·å›æ‡‰è§£è®€** - æ˜¯å¦è­˜åˆ¥éŒ¯èª¤ç‹€æ…‹ï¼Ÿ
4. **RAG æ€§èƒ½** - æª¢ç´¢æ˜¯å¦ç›¸é—œä¸”æœ€æ–°ï¼Ÿ

#### 4.7 è©•ä¼°è€…çš„é¸æ“‡

**1. LLM-as-a-Judge**

**é©ç”¨å ´æ™¯ï¼š** è©•ä¼°å®šæ€§æ–¹é¢ï¼ˆå¦‚æ‘˜è¦å“è³ªï¼‰

**æ–¹æ³•ï¼š** ä½¿ç”¨å¼·å¤§ LLMï¼ˆå¦‚ Gemini Advancedï¼‰

**æŠ€å·§ï¼š** é…å°æ¯”è¼ƒæé«˜å¯é æ€§

**å„ªå‹¢ï¼š** æä¾›è¦æ¨¡åŒ–è©•ä¼°

**æ³¨æ„äº”å¤§åèª¤ï¼š**
1. Preference Biasï¼ˆåå¥½åèª¤ï¼‰
2. Verbosity Biasï¼ˆå†—é•·åèª¤ï¼‰
3. Sycophancyï¼ˆè¨å¥½æ€§è¡Œç‚ºï¼‰
4. Score Biasï¼ˆåˆ†æ•¸åèª¤ï¼‰
5. Outcome Biasï¼ˆçµæœåèª¤ï¼‰

**2. Agent-as-a-Judge**

**é©ç”¨å ´æ™¯ï¼š** è©•ä¼°å®Œæ•´åŸ·è¡Œè¿½è¹¤

**è©•ä¼°å°è±¡ï¼š** è¨ˆç•«å“è³ªå’Œå·¥å…·ä½¿ç”¨é‚è¼¯

**ç‰¹é»ï¼š** è¶…è¶Šæœ€çµ‚è¼¸å‡ºï¼Œæ·±å…¥éç¨‹

**3. Human-in-the-Loop (HITL)**

**ä¸å¯æˆ–ç¼ºçš„å ´æ™¯ï¼š**
- æ·±åº¦ä¸»è§€æ€§åˆ¤æ–·
- è¤‡é›œé ˜åŸŸçŸ¥è­˜
- é“å¾·ä¸€è‡´æ€§é©—è­‰
- å»ºç«‹é»ƒé‡‘æ¨™æº–æ•¸æ“šé›†

**æ ¸å¿ƒåŸå‰‡ï¼š** äººé¡æ˜¯ä»²è£è€…

### å¯¦ä½œæŠ€è¡“

#### 4.8 Plugins èˆ‡ Callbacks æ¶æ§‹

**Pluginï¼š** åœ¨ Agent ç”Ÿå‘½é€±æœŸå„éšæ®µè‡ªå‹•åŸ·è¡Œçš„ç¨‹å¼ç¢¼æ¨¡çµ„

```python
class CustomPlugin(BasePlugin):
    # Agent å‘¼å«å‰å¾Œ
    async def before_agent_callback(...)
    async def after_agent_callback(...)

    # å·¥å…·å‘¼å«å‰å¾Œ
    async def before_tool_callback(...)
    async def after_tool_callback(...)

    # LLM å‘¼å«å‰å¾Œ
    async def before_model_callback(...)
    async def after_model_callback(...)

    # éŒ¯èª¤è™•ç†
    async def on_model_error_callback(...)
```

**LoggingPlugin å„ªå‹¢ï¼š**
- è‡ªå‹•æ•ç²æ‰€æœ‰ Agent æ´»å‹•
- ç„¡éœ€æ‰‹å‹•ç·¨å¯«æ¯å€‹ callback
- æ¨™æº–åŒ–çš„å¯è§€æ¸¬æ€§è³‡æ–™

#### 4.9 è©•ä¼°é…ç½®èˆ‡åŸ·è¡Œ

**æ­¥é©Ÿ 1ï¼šå»ºç«‹è©•ä¼°é…ç½®**

```json
{
  "criteria": {
    "tool_trajectory_avg_score": 1.0,
    "response_match_score": 0.8
  }
}
```

**æ­¥é©Ÿ 2ï¼šå»ºç«‹æ¸¬è©¦æ¡ˆä¾‹**

```json
{
  "eval_set_id": "test_suite",
  "eval_cases": [
    {
      "eval_id": "test_case_1",
      "conversation": [
        {
          "user_content": {...},
          "final_response": {...},
          "intermediate_data": {
            "tool_uses": [...]
          }
        }
      ]
    }
  ]
}
```

**æ­¥é©Ÿ 3ï¼šåŸ·è¡Œè©•ä¼°**

```bash
adk eval agent_dir evalset.json \
  --config_file_path=test_config.json \
  --print_detailed_results
```

#### 4.10 è©•ä¼°æŒ‡æ¨™æ·±åº¦è§£æ

**Response Match Scoreï¼ˆå›æ‡‰åŒ¹é…åˆ†æ•¸ï¼‰**
- **ç¯„åœï¼š** 0.0 - 1.0
- **æ„ç¾©ï¼š** å¯¦éš›å›æ‡‰èˆ‡é æœŸå›æ‡‰çš„ç›¸ä¼¼åº¦
- **é–¾å€¼å»ºè­°ï¼š** 0.8ï¼ˆ80% ç›¸ä¼¼åº¦ï¼‰

**Tool Trajectory Scoreï¼ˆå·¥å…·è»Œè·¡åˆ†æ•¸ï¼‰**
- **ç¯„åœï¼š** 0.0 - 1.0
- **æ„ç¾©ï¼š** å·¥å…·ä½¿ç”¨çš„æ­£ç¢ºæ€§
- **æª¢æŸ¥é …ç›®ï¼š** å·¥å…·é¸æ“‡ã€åƒæ•¸æ­£ç¢ºæ€§ã€å‘¼å«åºåˆ—
- **é–¾å€¼å»ºè­°ï¼š** 1.0ï¼ˆå®Œç¾åŒ¹é…ï¼‰

### Agent Quality Flywheel

**æŒçºŒæ”¹é€²å¾ªç’°ï¼š**

```
è¨­è¨ˆå¯è©•ä¼°çš„æ¶æ§‹
    â†“
å¯¦æ–½å¯è§€æ¸¬æ€§ï¼ˆLogs + Traces + Metricsï¼‰
    â†“
åŸ·è¡Œç³»çµ±åŒ–è©•ä¼°ï¼ˆè‡ªå‹•åŒ– + äººå·¥ï¼‰
    â†“
åˆ†æè»Œè·¡æ‰¾å‡ºå•é¡Œ
    â†“
åŸºæ–¼æ•¸æ“šæ”¹é€² Agent
    â†“
é‡æ–°è©•ä¼°é©—è­‰æ”¹é€²
    â†“
ï¼ˆå¾ªç’°ï¼‰
```

**ä¸‰å¤§æ ¸å¿ƒåŸå‰‡ï¼š**

1. **è©•ä¼°ä½œç‚ºæ¶æ§‹æ”¯æŸ±** - å¾è¨­è¨ˆé–‹å§‹è€ƒæ…®å¯è©•ä¼°æ€§
2. **è»Œè·¡æ‰æ˜¯çœŸç›¸** - è©•ä¼°å®Œæ•´ã€Œæ€ç¶­éç¨‹ã€
3. **äººé¡æ˜¯ä»²è£è€…** - è‡ªå‹•åŒ–æä¾›è¦æ¨¡ï¼Œäººé¡æä¾›ç´°å¾®åˆ¤æ–·

### Day 4 é—œéµæ”¶ç©«

âœ… **ç†è§£å¯è§€æ¸¬æ€§ä¸‰æ”¯æŸ±ï¼šLogsã€Tracesã€Metrics**
âœ… **æŒæ¡é»‘ç®±èˆ‡ç»ç’ƒç®±è©•ä¼°æ–¹æ³•**
âœ… **å¯¦æ–½ LLM-as-a-Judge èˆ‡ HITL è©•ä¼°**
âœ… **å»ºç«‹ç³»çµ±åŒ–çš„è©•ä¼°é…ç½®èˆ‡åŸ·è¡Œæµç¨‹**
âœ… **ç†è§£å“è³ªé£›è¼ªçš„æŒçºŒæ”¹é€²æ©Ÿåˆ¶**

---

## ğŸš€ Day 5ï¼šå¾åŸå‹åˆ°ç”Ÿç”¢ç’°å¢ƒ

### æ ¸å¿ƒæ¦‚å¿µ

#### 5.1 AgentOpsï¼šAI ä»£ç†ç¨‹å¼ç‡Ÿé‹

**80% å·¥ä½œç²¾åŠ›èŠ±åœ¨åŸºç¤è¨­æ–½ã€å®‰å…¨æ€§å’Œé©—è­‰ä¸Š**

**Agent çš„ç¨ç‰¹ç‰¹æ€§ï¼š**
- **è‡ªä¸»äº’å‹•** - èƒ½å¤ è‡ªå·±æ±ºç­–å’ŒåŸ·è¡Œ
- **æœ‰ç‹€æ…‹** - è¨˜æ†¶å’Œä¸Šä¸‹æ–‡ç®¡ç†
- **å‹•æ…‹åŸ·è¡Œè·¯å¾‘** - æ¯æ¬¡æ¨ç†è·¯å¾‘å¯èƒ½ä¸åŒï¼ˆéç¢ºå®šæ€§ï¼‰

#### 5.2 AgentOps åœ˜éšŠçµ„æˆ

**å‚³çµ±è§’è‰²ï¼š**
- é›²ç«¯å¹³å°åœ˜éšŠ
- è³‡æ–™å·¥ç¨‹åœ˜éšŠ
- MLOps åœ˜éšŠ

**GenAI æ™‚ä»£æ–°è§’è‰²ï¼š**
- **æç¤ºå·¥ç¨‹å¸«ï¼ˆPrompt Engineersï¼‰** - å®šç¾©æ¨¡å‹å•ç­”è¦ç¯„
- **AI å·¥ç¨‹å¸«ï¼ˆAI Engineersï¼‰** - æ“´å±•åˆ°ç”Ÿç”¢ç’°å¢ƒï¼Œå»ºç«‹ç©©å¥å¾Œç«¯

### æŠ•å…¥ç”Ÿç”¢çš„æ ¸å¿ƒåŸå‰‡

#### 5.3 è©•ä¼°é–€æ§éƒ¨ç½²

**é—œéµåŸå‰‡ï¼š** Agent ç‰ˆæœ¬æ¥è§¸ç”¨æˆ¶å‰ï¼Œå¿…é ˆé€šéå…¨é¢è©•ä¼°

**ç‚ºä»€éº¼éœ€è¦è©•ä¼°å®Œæ•´è»Œè·¡ï¼Ÿ**
> Agent å¯èƒ½ã€Œèµ°éŒ¯è·¯ä½†æŠµé”æ­£ç¢ºç­”æ¡ˆã€ï¼Œé€™åœ¨ç”Ÿç”¢ç’°å¢ƒæ˜¯å±éšªçš„

**è©•ä¼°å…§å®¹ï¼š**
- é‡å°ã€Œé»ƒé‡‘è³‡æ–™é›†ã€æ¸¬è©¦
- è©•ä¼°è¡Œç‚ºå“è³ª
- æª¢æŸ¥é˜²è­·æ¬„é•è¦
- æ¸¬è©¦æç¤ºæ³¨å…¥æ¼æ´

#### 5.4 è‡ªå‹•åŒ– CI/CD ç®¡ç·š

**ä¸‰å€‹éšæ®µï¼š**

```
1. Pre-Merge CI (é åˆä½µæ•´åˆ)
   â†“
   å¿«é€Ÿæª¢æŸ¥ï¼šå–®å…ƒæ¸¬è©¦ã€ç¨‹å¼ç¢¼è¦ç¯„
   é‹è¡Œ Agent å“è³ªè©•ä¼°å¥—ä»¶
   å¤±æ•—æœƒé˜²æ­¢åˆä½µè‡³ä¸»åˆ†æ”¯

2. Post-Merge Validation in Staging (æš«å­˜ç’°å¢ƒé©—è­‰)
   â†“
   éƒ¨ç½²åˆ°èˆ‡ç”Ÿç”¢é«˜åº¦ç›¸ä¼¼çš„æš«å­˜ç’°å¢ƒ
   æ›´å…¨é¢æ¸¬è©¦ï¼šè² è¼‰æ¸¬è©¦ã€æ•´åˆæ¸¬è©¦
   å…§éƒ¨ç”¨æˆ¶æ¸¬è©¦ï¼ˆDogfoodingï¼‰

3. Gated Deployment to Production (é–€æ§éƒ¨ç½²åˆ°ç”Ÿç”¢)
   â†“
   é€šéæš«å­˜é©—è­‰çš„éƒ¨ç½²ç”¢ç‰©
   éœ€è¦ç”¢å“è² è²¬äººæœ€çµ‚ç°½æ ¸
```

#### 5.5 å®‰å…¨ç™¼å¸ƒç­–ç•¥

**Canaryï¼ˆé‡‘çµ²é›€ï¼‰** - å¾ 1% ç”¨æˆ¶é–‹å§‹ï¼Œé€æ¼¸æ“´å¤§æµé‡

**Blue-Greenï¼ˆè—ç¶ ï¼‰** - é‹è¡Œå…©å€‹ç›¸åŒç’°å¢ƒï¼Œå³æ™‚åˆ‡æ›æµé‡

**A/B Testingï¼ˆA/B æ¸¬è©¦ï¼‰** - æ¯”è¼ƒä¸åŒ Agent ç‰ˆæœ¬çš„æ¥­å‹™æŒ‡æ¨™

**åŸºç¤ï¼š** åš´æ ¼çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œä»¥ä¾¿å³æ™‚å›æ»¾

### ç”Ÿç”¢ç‡Ÿé‹çš„æŒçºŒè¿´åœˆ

#### 5.6 è§€å¯Ÿï¼ˆObserveï¼‰â†’ è¡Œå‹•ï¼ˆActï¼‰â†’ æ¼”åŒ–ï¼ˆEvolveï¼‰

**è§€å¯Ÿ - Agent çš„æ„Ÿå®˜ç³»çµ±ï¼š**
1. **æ—¥èªŒï¼ˆLogsï¼‰** - ç²’ç‹€äº‹å¯¦æ—¥è¨˜
2. **è¿½è¹¤ï¼ˆTracesï¼‰** - é€£æ¥æ—¥èªŒçš„æ•˜äº‹
3. **æŒ‡æ¨™ï¼ˆMetricsï¼‰** - å½™ç¸½å ±å‘Šå¡

**è¡Œå‹• - å³æ™‚å¹²é ï¼š**
- ç®¡ç†ç³»çµ±å¥åº·ï¼ˆç„¡ç‹€æ…‹è¨­è¨ˆã€ç•°æ­¥è™•ç†ï¼‰
- ç®¡ç†é¢¨éšªï¼ˆæ–·è·¯å™¨ã€HITL å¯©æ ¸ã€å¿«é€Ÿè£œä¸ï¼‰

**æ¼”åŒ– - é•·æœŸæ”¹é€²ï¼š**
1. åˆ†æç”Ÿç”¢è³‡æ–™
2. å°‡ç”Ÿç”¢å¤±æ•—è½‰åŒ–ç‚ºæ–°æ¸¬è©¦æ¡ˆä¾‹
3. æ›´æ–°è©•ä¼°è³‡æ–™é›†
4. æäº¤æ”¹é€²ä¸¦è§¸ç™¼è‡ªå‹•åŒ–ç®¡ç·š
5. é€éå®‰å…¨ç™¼å¸ƒç­–ç•¥éƒ¨ç½²

### Agent2Agent (A2A) å”å®š

#### 5.7 ç‚ºä»€éº¼éœ€è¦ A2Aï¼Ÿ

**æŒ‘æˆ°ï¼š**
- å–®ä¸€ Agent ç„¡æ³•åšæ‰€æœ‰äº‹æƒ…
- Agent éœ€è¦å”ä½œ
- ä¸åŒåœ˜éšŠå»ºç«‹ä¸åŒ Agent
- Agent å¯èƒ½ä½¿ç”¨ä¸åŒèªè¨€/æ¡†æ¶

**è§£æ±ºæ–¹æ¡ˆï¼š** æ¨™æº–åŒ–çš„ A2A å”å®š

#### 5.8 A2A Protocol çš„æ ¸å¿ƒåƒ¹å€¼

è®“ä¸åŒçš„ AI Agent å¯ä»¥ï¼š
- âœ¨ **é€éç¶²è·¯é€šè¨Š** - Agent å¯åœ¨ä¸åŒæ©Ÿå™¨ä¸Š
- âœ¨ **è·¨æ¡†æ¶å·¥ä½œ** - èªè¨€/æ¡†æ¶ç„¡é—œ
- âœ¨ **ä½¿ç”¨å½¼æ­¤çš„èƒ½åŠ›** - ä¸€å€‹ Agent å¯èª¿ç”¨å¦ä¸€å€‹å¦‚åŒå·¥å…·
- âœ¨ **ç¶­è­·æ­£å¼å¥‘ç´„** - Agent Cards æè¿°èƒ½åŠ›

#### 5.9 A2A çš„ä¸‰å¤§æ‡‰ç”¨å ´æ™¯

1. **è·¨æ¡†æ¶æ•´åˆ** - ADK Agent èˆ‡å…¶ä»–æ¡†æ¶ Agent é€šè¨Š
2. **è·¨èªè¨€é€šè¨Š** - Python Agent å‘¼å« Java æˆ– Node.js Agent
3. **è·¨çµ„ç¹”é‚Šç•Œ** - å…§éƒ¨ Agent æ•´åˆå¤–éƒ¨ä¾›æ‡‰å•†æœå‹™

#### 5.10 A2A vs MCP çš„å€åˆ¥

| å”å®š | å®šç¾© | é©ç”¨å ´æ™¯ |
|------|------|----------|
| **A2A** | é«˜å±¤æ¬¡ã€æœ‰ç‹€æ…‹çš„è¤‡é›œç›®æ¨™å§”è¨— | å§”æ´¾è¤‡é›œç›®æ¨™ã€è·¨åœ˜éšŠ/è·¨æ¡†æ¶å”ä½œ |
| **MCP** | ç°¡å–®ã€ç„¡ç‹€æ…‹çš„å·¥å…·æ•´åˆæ¨™æº– | åŸ·è¡Œæ˜ç¢ºå®šç¾©ã€çµæ§‹åŒ–çš„è¼¸å…¥/è¼¸å‡ºåŸèª |

**æ±½è»Šç¶­ä¿®åº—æ¯”å–»ï¼š**
- **A2A** - é¡§å®¢èˆ‡ã€Œå•†åº—ç¶“ç†ã€Agent å°è©±ï¼Œç¶“ç†å§”è¨—ã€Œæ©Ÿæ¢°å¸«ã€Agent
- **MCP** - ã€Œæ©Ÿæ¢°å¸«ã€Agent ä½¿ç”¨ MCP å‘¼å«å·¥å…·ï¼ˆæƒæéŒ¯èª¤ã€æŸ¥è©¢æ‰‹å†Šï¼‰

#### 5.11 Agent Card çš„é‡è¦æ€§

**Agent Cardï¼š** Agent çš„ã€Œåç‰‡ã€ï¼Œæ¨™æº–åŒ– JSON è¦æ ¼

**æè¿°å…§å®¹ï¼š**
- Agent åŠŸèƒ½ã€å®‰å…¨æ€§è¦æ±‚
- è¯ç¹«æ–¹å¼ï¼ˆURLï¼‰
- æŠ€èƒ½ï¼ˆSkillsï¼‰åˆ—è¡¨
- å”å®šç‰ˆæœ¬å’Œç«¯é»

**æ¨™æº–è·¯å¾‘ï¼š** `/.well-known/agent-card.json`

### A2A é€šè¨Šå¯¦ä½œ

#### 5.12 æš´éœ² Agentï¼ˆä¾›æ‡‰å•†ç«¯ï¼‰

```python
# å»ºç«‹ Product Catalog Agent
product_catalog_agent = LlmAgent(
    name="product_catalog_agent",
    description="å¤–éƒ¨ä¾›æ‡‰å•†çš„ç”¢å“ç›®éŒ„ä»£ç†",
    instruction="æä¾›ç”¢å“è³‡è¨Šã€åƒ¹æ ¼å’Œåº«å­˜ç‹€æ…‹",
    tools=[get_product_info]
)

# ä½¿ç”¨ to_a2a() æš´éœ² Agent
product_catalog_a2a_app = to_a2a(
    product_catalog_agent,
    port=8001
)

# è‡ªå‹•ç”¢ç”Ÿï¼š
# - FastAPI/Starlette ä¼ºæœå™¨
# - Agent Card
# - æ¨™æº–ç«¯é»: /.well-known/agent-card.json
# - A2A å”å®šè™•ç†
```

#### 5.13 æ¶ˆè²» Agentï¼ˆå®¢æˆ¶ç«¯ï¼‰

```python
# å»ºç«‹é ç«¯ Agent çš„å®¢æˆ¶ç«¯ä»£ç†
remote_product_catalog_agent = RemoteA2aAgent(
    name="product_catalog_agent",
    description="é ç«¯ç”¢å“ç›®éŒ„ä»£ç†",
    agent_card="http://localhost:8001/.well-known/agent-card.json"
)

# å»ºç«‹å®¢æœ Agent
customer_support_agent = LlmAgent(
    name="customer_support_agent",
    description="å”åŠ©å®¢æˆ¶æŸ¥è©¢ç”¢å“è³‡è¨Šçš„å®¢æœåŠ©æ‰‹",
    instruction="ä½¿ç”¨ product_catalog_agent æŸ¥è©¢ç”¢å“è³‡è¨Š",
    sub_agents=[remote_product_catalog_agent]
)
```

#### 5.14 A2A é€šè¨Šæµç¨‹

```
1. å®¢æˆ¶ â†’ Customer Support Agentï¼ˆç”¨æˆ¶æŸ¥è©¢ï¼‰
2. Support Agent â†’ åˆ†ææŸ¥è©¢ï¼Œæ±ºå®šéœ€è¦ç”¢å“è³‡è¨Š
3. Support Agent â†’ å‘¼å« remote_product_catalog_agent
4. RemoteA2aAgent â†’ è½‰æ›ç‚º A2A å”å®šè«‹æ±‚
5. HTTP POST â†’ http://localhost:8001/tasks
6. Product Catalog Agent â†’ æ”¶åˆ°è«‹æ±‚ï¼Œèª¿ç”¨ get_product_info
7. Product Catalog Agent â†’ é€é A2A å”å®šå›æ‡‰
8. RemoteA2aAgent â†’ æ¥æ”¶å›æ‡‰ï¼Œå‚³å›çµ¦ Support Agent
9. Support Agent â†’ æ•´åˆè³‡è¨Šï¼Œç”Ÿæˆå‹å–„å›ç­”
10. å®¢æˆ¶ â† æ”¶åˆ°å®Œæ•´å›æ‡‰
```

### éƒ¨ç½²åˆ° Vertex AI Agent Engine

#### 5.15 ç‚ºä»€éº¼éœ€è¦ç”Ÿç”¢ç’°å¢ƒï¼Ÿ

**é–‹ç™¼ç’°å¢ƒé™åˆ¶ï¼š**
- âŒ åªå­˜åœ¨æ–¼ç­†è¨˜æœ¬å’Œé–‹ç™¼ç’°å¢ƒ
- âŒ æœƒè©±åœæ­¢æ™‚ Agent åœæ­¢å·¥ä½œ
- âŒ åœ˜éšŠæˆå“¡ç„¡æ³•è¨ªå•
- âŒ æ²’æœ‰æ“´å±•æ€§ã€å¯é æ€§ä¿è­‰

#### 5.16 Vertex AI Agent Engine å„ªå‹¢

- **å®Œå…¨è¨—ç®¡**æœå‹™ï¼Œå°ˆç‚º AI Agent è¨­è¨ˆ
- **è‡ªå‹•æ“´å±•**ï¼Œå…§å»ºæœƒè©±ç®¡ç†
- **ç°¡å–®éƒ¨ç½²**ï¼Œä½¿ç”¨ Agent Starter Pack
- æä¾›æ¯æœˆå…è²»é¡åº¦

#### 5.17 å°ˆæ¡ˆçµæ§‹

```
sample_agent/
â”œâ”€â”€ agent.py                  # Agent é‚è¼¯
â”œâ”€â”€ requirements.txt          # ä¾è³´å¥—ä»¶
â”œâ”€â”€ .env                      # ç’°å¢ƒé…ç½®
â””â”€â”€ .agent_engine_config.json # éƒ¨ç½²é…ç½®
```

**agent.py æ ¸å¿ƒé‚è¼¯ï¼š**

```python
from google.adk.agents import Agent

def get_weather(city: str) -> dict:
    """ç²å–æŒ‡å®šåŸå¸‚çš„å¤©æ°£è³‡è¨Š"""
    weather_data = {
        "san francisco": {"status": "success", "report": "æ™´å¤©ï¼Œ72Â°F"},
        "tokyo": {"status": "success", "report": "æ™´æœ—ï¼Œ70Â°F"}
    }
    return weather_data.get(city.lower(), {"status": "error"})

root_agent = Agent(
    name="weather_assistant",
    model="gemini-2.5-flash-lite",
    description="æä¾›åŸå¸‚å¤©æ°£è³‡è¨Šçš„å‹å–„åŠ©æ‰‹",
    instruction="è­˜åˆ¥åŸå¸‚ã€ä½¿ç”¨ get_weather å·¥å…·ã€ä»¥å‹å–„èªæ°£å›æ‡‰",
    tools=[get_weather]
)
```

**.agent_engine_config.json é…ç½®ï¼š**

```json
{
    "min_instances": 0,      // ä¸ä½¿ç”¨æ™‚ç¸®æ¸›ç‚ºé›¶
    "max_instances": 1,      // æœ€å¤š 1 å€‹å¯¦ä¾‹
    "resource_limits": {
        "cpu": "1",          // 1 CPU æ ¸å¿ƒ
        "memory": "1Gi"      // 1 GB è¨˜æ†¶é«”
    }
}
```

#### 5.18 éƒ¨ç½²æµç¨‹

**å‰ç½®éœ€æ±‚ï¼š**
1. å»ºç«‹ GCP å¸³æˆ¶ï¼ˆæ–°ç”¨æˆ¶ $300 å…è²»é¡åº¦ï¼‰
2. å•Ÿç”¨å¿…è¦ APIï¼ˆVertex AIã€Cloud Storageã€Loggingï¼‰
3. è¨­å®šå°ˆæ¡ˆ ID

**éƒ¨ç½²å‘½ä»¤ï¼š**

```bash
adk deploy agent_engine \
  --project=$PROJECT_ID \
  --region=$deployed_region \
  sample_agent \
  --agent_engine_config_file=sample_agent/.agent_engine_config.json
```

**æ¸¬è©¦å·²éƒ¨ç½² Agentï¼š**

```python
import vertexai
from vertexai import agent_engines

vertexai.init(project=PROJECT_ID, location=deployed_region)

agents_list = list(agent_engines.list())
remote_agent = agents_list[0]

# æ¸¬è©¦ Agent
async for item in remote_agent.async_stream_query(
    message="What is the weather in Tokyo?",
    user_id="user_42"
):
    print(item)
```

#### 5.19 Vertex AI Memory Bank

**å•é¡Œï¼š** æœƒè©±è¨˜æ†¶åƒ…é™å–®æ¬¡å°è©±

**è§£æ±ºæ–¹æ¡ˆï¼š** Memory Bank æä¾›è·¨å°è©±çš„é•·æœŸè¨˜æ†¶

**é‹ä½œæ–¹å¼ï¼š**
1. **å°è©±æœŸé–“** - Agent ä½¿ç”¨è¨˜æ†¶å·¥å…·æœå°‹éå»äº‹å¯¦
2. **å°è©±ä¹‹å¾Œ** - è‡ªå‹•æå–é—œéµè³‡è¨Š
3. **ä¸‹æ¬¡æœƒè©±** - Agent è‡ªå‹•å›æ†¶ä¸¦ä½¿ç”¨è©²è³‡è¨Š

**ç¯„ä¾‹å ´æ™¯ï¼š**

```
æœƒè©± 1ï¼ˆä»Šå¤©ï¼‰ï¼š
ç”¨æˆ¶ï¼š"æˆ‘åå¥½æ”æ°æº«åº¦"
Agentï¼š"å¥½çš„ï¼Œæˆ‘æœƒè¨˜ä½ä½ åå¥½æ”æ°æº«åº¦"

æœƒè©± 2ï¼ˆå¹¾å¤©å¾Œï¼‰ï¼š
ç”¨æˆ¶ï¼š"æ±äº¬å¤©æ°£å¦‚ä½•ï¼Ÿ"
Agentï¼š"æ±äº¬æ™´æœ—ï¼Œ21Â°C"  â† è‡ªå‹•ä½¿ç”¨æ”æ°ï¼
```

#### 5.20 æ¸…ç†è³‡æº

**é˜²æ­¢æ„å¤–æ”¶è²»ï¼š**

```python
agent_engines.delete(resource_name=remote_agent.resource_name, force=True)
```

### å®‰å…¨æ€§ï¼šä¸‰å±¤é˜²ç¦¦

#### 5.21 å®‰å…¨é˜²è­·ç­–ç•¥

**1. æ”¿ç­–å®šç¾©ï¼ˆPolicy Definitionï¼‰**
- å°‡æ‰€éœ€è¡Œç‚ºç·¨ç¨‹åˆ°ç³»çµ±æŒ‡ä»¤ä¸­

**2. é˜²è­·æ¬„èˆ‡éæ¿¾ï¼ˆGuardrails and Filteringï¼‰**
- **è¼¸å…¥éæ¿¾** - é˜»æ­¢æƒ¡æ„è¼¸å…¥
- **è¼¸å‡ºéæ¿¾** - æª¢æŸ¥æœ‰å®³å…§å®¹æˆ– PII
- **äººå·¥å¯©æ ¸ï¼ˆHITLï¼‰** - å°é«˜é¢¨éšªè¡Œå‹•æš«åœå‡ç´š

**3. æŒçºŒä¿è­‰èˆ‡æ¸¬è©¦ï¼ˆContinuous Assuranceï¼‰**
- ä½¿ç”¨å…¨é¢è©•ä¼°ç®¡ç·š
- ä¸»å‹•ã€Œç´…éšŠæ¼”ç·´ï¼ˆRed Teamingï¼‰ã€

### Day 5 é—œéµæ”¶ç©«

âœ… **ç†è§£ AgentOps æ¦‚å¿µå’Œæœ€å¾Œä¸€å“©è·¯æŒ‘æˆ°**
âœ… **æŒæ¡ A2A å”å®šèˆ‡å¤šä»£ç†å”ä½œ**
âœ… **èƒ½éƒ¨ç½²åˆ° Vertex AI Agent Engine**
âœ… **å¯¦æ–½ CI/CD ç®¡ç·šå’Œå®‰å…¨ç™¼å¸ƒç­–ç•¥**
âœ… **å»ºç«‹ç”Ÿç”¢ç’°å¢ƒçš„ç›£æ§èˆ‡æ¼”åŒ–æ©Ÿåˆ¶**

---

## ğŸ”§ æ ¸å¿ƒæŠ€è¡“æ£§æ•´åˆ

### å®Œæ•´æŠ€è¡“æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Production Environment                     â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Gateway   â”‚    â”‚   Monitoring â”‚    â”‚   Security  â”‚    â”‚
â”‚  â”‚  (HITL/Auth)â”‚    â”‚(Logs/Traces) â”‚    â”‚ (Guardrails)â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Vertex AI Agent Engine                    â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚  Agent 1   â”‚   â”‚  Agent 2   â”‚   â”‚  Agent 3   â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   (ADK)    â”‚â—„â”€â–ºâ”‚   (ADK)    â”‚â—„â”€â–ºâ”‚   (ADK)    â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚         â†•                â†•                â†•         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚         A2A Protocol Layer                   â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â†•                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              MCP Tool Integration                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚ DB  â”‚  â”‚ API â”‚  â”‚Searchâ”‚  â”‚ Codeâ”‚  â”‚Filesâ”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â†•                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         State Management                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚  â”‚  â”‚  Sessions  â”‚              â”‚   Memory   â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ (çŸ­æœŸè¨˜æ†¶)  â”‚              â”‚  (é•·æœŸè¨˜æ†¶) â”‚        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ADK (Agent Development Kit) æ ¸å¿ƒå…ƒä»¶

| çµ„ä»¶ | åŠŸèƒ½ | é—œéµé¡åˆ¥ |
|------|------|---------|
| **Agents** | Agent å®šç¾©èˆ‡ç·¨æ’ | `LlmAgent`, `SequentialAgent`, `ParallelAgent`, `LoopAgent` |
| **Models** | LLM æ•´åˆ | `Gemini`, `retry_options` |
| **Tools** | å·¥å…·å®šç¾©èˆ‡æ•´åˆ | `FunctionTool`, `AgentTool`, `McpToolset`, `load_memory` |
| **Sessions** | æœƒè©±ç®¡ç† | `InMemorySessionService`, `DatabaseSessionService` |
| **Memory** | è¨˜æ†¶ç®¡ç† | `InMemoryMemoryService`, `VertexAiMemoryBankService` |
| **Runners** | åŸ·è¡Œå™¨ | `Runner`, `InMemoryRunner` |
| **Apps** | æ‡‰ç”¨é…ç½® | `App`, `ResumabilityConfig`, `EventsCompactionConfig` |
| **Evaluation** | è©•ä¼°æ¡†æ¶ | `adk eval`, test_config.json, evalset.json |
| **Observability** | å¯è§€æ¸¬æ€§ | `LoggingPlugin`, Callbacks, OpenTelemetry |
| **A2A** | Agent é–“é€šè¨Š | `to_a2a()`, `RemoteA2aAgent`, Agent Card |
| **Deployment** | éƒ¨ç½²å·¥å…· | `adk deploy agent_engine`, Agent Starter Pack |

### é–‹ç™¼ç”Ÿå‘½é€±æœŸå®Œæ•´æµç¨‹

```
Phase 1: Design & Prototype
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. å®šç¾© Agent èƒ½åŠ›       â”‚
â”‚ 2. é¸æ“‡æ¶æ§‹æ¨¡å¼         â”‚
â”‚ 3. è¨­è¨ˆå·¥å…·é›†           â”‚
â”‚ 4. æœ¬åœ°é–‹ç™¼æ¸¬è©¦         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
Phase 2: Development
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. å¯¦ä½œ Agent é‚è¼¯       â”‚
â”‚ 2. æ•´åˆ Tools/MCP       â”‚
â”‚ 3. é…ç½® Session/Memory  â”‚
â”‚ 4. å¯¦æ–½å¯è§€æ¸¬æ€§         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
Phase 3: Quality Assurance
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. å»ºç«‹è©•ä¼°é…ç½®         â”‚
â”‚ 2. å»ºç«‹ Golden Dataset  â”‚
â”‚ 3. åŸ·è¡Œè‡ªå‹•åŒ–è©•ä¼°       â”‚
â”‚ 4. HITL äººå·¥å¯©æŸ¥        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
Phase 4: CI/CD Pipeline
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Pre-Merge CI         â”‚
â”‚ 2. Staging Validation   â”‚
â”‚ 3. Gated Production     â”‚
â”‚ 4. ç‰ˆæœ¬æ§åˆ¶             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
Phase 5: Production Release
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Canary/Blue-Green    â”‚
â”‚ 2. A/B Testing          â”‚
â”‚ 3. ç›£æ§èˆ‡è­¦å ±           â”‚
â”‚ 4. å³æ™‚å›æ»¾èƒ½åŠ›         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
Phase 6: Operations & Evolution
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Observe (è§€å¯Ÿ)        â”‚
â”‚ 2. Act (è¡Œå‹•)            â”‚
â”‚ 3. Evolve (æ¼”åŒ–)         â”‚
â”‚ 4. æŒçºŒæ”¹é€²             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
     [å¾ªç’°å› Phase 3]
```

---

## ğŸ’¡ æœ€ä½³å¯¦è¸ç¸½çµ

### Agent è¨­è¨ˆåŸå‰‡

#### 1. å–®ä¸€è·è²¬åŸå‰‡

```python
# âœ… å¥½çš„è¨­è¨ˆ
research_agent = Agent(
    name="ResearchAgent",
    instruction="åªä½¿ç”¨ google_search æœå°‹è³‡è¨Š",
    tools=[google_search]
)

# âŒ é¿å…çš„è¨­è¨ˆ
do_everything_agent = Agent(
    name="SuperAgent",
    instruction="ç ”ç©¶ã€æ’°å¯«ã€ç·¨è¼¯ã€ç¿»è­¯ã€äº‹å¯¦æŸ¥æ ¸",
    tools=[...]  # å¤ªå¤šè·è²¬
)
```

#### 2. æ¸…æ™°å…·é«”çš„æŒ‡ä»¤

```python
# âœ… å…·é«”æŒ‡ä»¤
instruction = """
1. æœå°‹ä¸»é¡Œç›¸é—œè³‡è¨Š
2. æå– 3 å€‹é—œéµç™¼ç¾ä¸¦é™„ä¸Šå¼•ç”¨
3. ä»¥æ¢åˆ—æ–¹å¼æ ¼å¼åŒ–
"""

# âŒ æ¨¡ç³ŠæŒ‡ä»¤
instruction = "åšç ”ç©¶ä¸¦è®“å®ƒè®Šå¥½"
```

#### 3. ç‹€æ…‹ç®¡ç†æœ€ä½³å¯¦è¸

**å‘½åæ…£ä¾‹ï¼š**

```python
# âœ… å¥½çš„åšæ³•
tool_context.state["user:name"] = "Sam"
tool_context.state["app:theme"] = "dark"
tool_context.state["temp:calculation"] = 42

# âŒ ä¸å¥½çš„åšæ³•
tool_context.state["name"] = "Sam"  # ä¸æ¸…æ¥šä½œç”¨åŸŸ
tool_context.state["data"] = {...}  # å¤ªé€šç”¨
```

### å·¥å…·è¨­è¨ˆæœ€ä½³å¯¦è¸

#### 4. å®Œæ•´çš„å·¥å…·æ–‡ä»¶

```python
def get_exchange_rate(base_currency: str, target_currency: str) -> dict:
    """
    æŸ¥è©¢å…©ç¨®è²¨å¹£é–“çš„åŒ¯ç‡

    Args:
        base_currency: åŸºç¤è²¨å¹£ä»£ç¢¼ï¼ˆå¦‚ 'USD'ï¼‰
        target_currency: ç›®æ¨™è²¨å¹£ä»£ç¢¼ï¼ˆå¦‚ 'EUR'ï¼‰

    Returns:
        dict: {
            "status": "success" | "error",
            "rate": float,
            "error_message": str  # åƒ…åœ¨éŒ¯èª¤æ™‚
        }

    Example:
        >>> get_exchange_rate("USD", "EUR")
        {"status": "success", "rate": 0.93}
    """
    # å¯¦ä½œ...
```

#### 5. çµæ§‹åŒ–å›å‚³å€¼

```python
# âœ… çµæ§‹åŒ–å›å‚³
return {
    "status": "success",
    "data": {
        "temperature": 21,
        "condition": "sunny"
    }
}

# âŒ ç´”æ–‡å­—å›å‚³
return "æ±äº¬æ™´æœ— 21 åº¦"  # Agent é›£ä»¥è§£æ
```

#### 6. å¯æ¢å¾©çš„éŒ¯èª¤è™•ç†

```python
def query_database(query: str) -> dict:
    try:
        result = db.execute(query)
        return {"status": "success", "data": result}
    except ConnectionError:
        return {
            "status": "error",
            "error_type": "connection_error",
            "message": "ç„¡æ³•é€£æ¥è³‡æ–™åº«",
            "suggestion": "è«‹æª¢æŸ¥è³‡æ–™åº«é€£ç·šä¸¦é‡è©¦"
        }
    except SyntaxError as e:
        return {
            "status": "error",
            "error_type": "syntax_error",
            "message": f"SQL èªæ³•éŒ¯èª¤ï¼š{e}",
            "suggestion": "è«‹æª¢æŸ¥ SQL æŸ¥è©¢èªæ³•"
        }
```

### è©•ä¼°èˆ‡å“è³ªä¿è­‰

#### 7. å»ºç«‹å…¨é¢çš„æ¸¬è©¦æ¡ˆä¾‹é›†

```json
{
  "eval_set_id": "comprehensive_test",
  "eval_cases": [
    {
      "eval_id": "normal_case_1",
      "description": "æ­£å¸¸æµç¨‹æ¸¬è©¦"
    },
    {
      "eval_id": "edge_case_1",
      "description": "é‚Šç·£æ¡ˆä¾‹æ¸¬è©¦"
    },
    {
      "eval_id": "error_case_1",
      "description": "éŒ¯èª¤è™•ç†æ¸¬è©¦"
    }
  ]
}
```

#### 8. é¿å… LLM-as-Judge åèª¤

```python
# âœ… ä½¿ç”¨æ˜ç¢ºçš„è©•åˆ†è¦ç¯„ï¼ˆRubricsï¼‰
evaluation_rubric = """
è©•ä¼°ä»¥ä¸‹é¢å‘ï¼ˆ1-5 åˆ†ï¼‰ï¼š
1. äº‹å¯¦æ­£ç¢ºæ€§ï¼šç­”æ¡ˆæ˜¯å¦åŸºæ–¼å¯é©—è­‰äº‹å¯¦ï¼Ÿ
2. å®Œæ•´æ€§ï¼šæ˜¯å¦æ¶µè“‹æ‰€æœ‰å¿…è¦è³‡è¨Šï¼Ÿ
3. æ¸…æ™°åº¦ï¼šè¡¨é”æ˜¯å¦æ¸…æ¥šæ˜“æ‡‚ï¼Ÿ
4. å¼•ç”¨å“è³ªï¼šæ˜¯å¦æä¾›é©ç•¶å¼•ç”¨ï¼Ÿ

å°æ¯å€‹é¢å‘çµ¦åˆ†ä¸¦èªªæ˜ç†ç”±ã€‚
"""

# âŒ é¿å…è‡ªç”±å½¢å¼è©•ä¼°
evaluation_instruction = "è©•ä¼°å›æ‡‰å“è³ª"  # å¤ªæ¨¡ç³Š
```

#### 9. äººé¡å¯©æŸ¥é—œéµé»

```python
def execute_sensitive_operation(params, tool_context: ToolContext):
    """åŸ·è¡Œæ•æ„Ÿæ“ä½œï¼Œéœ€è¦äººé¡å¯©æ‰¹"""

    # æª¢æŸ¥æ˜¯å¦ç‚ºé«˜é¢¨éšªæ“ä½œ
    if is_high_risk(params):
        # è«‹æ±‚äººé¡ç¢ºèª
        tool_context.request_confirmation(
            hint=f"å°‡åŸ·è¡Œæ•æ„Ÿæ“ä½œï¼š{params}ã€‚æ˜¯å¦ç¹¼çºŒï¼Ÿ"
        )

        # ç­‰å¾…ç¢ºèª
        if not tool_context.tool_confirmation.confirmed:
            return {"status": "cancelled", "reason": "ç”¨æˆ¶å–æ¶ˆ"}

    # åŸ·è¡Œæ“ä½œ
    result = perform_operation(params)
    return result
```

### ç”Ÿç”¢éƒ¨ç½²æœ€ä½³å¯¦è¸

#### 10. æ¼¸é€²å¼ç™¼å¸ƒ

```python
# Canary ç™¼å¸ƒç­–ç•¥
deployment_strategy = {
    "type": "canary",
    "stages": [
        {"traffic_percent": 1, "duration": "1h"},    # 1% æµé‡ 1 å°æ™‚
        {"traffic_percent": 10, "duration": "2h"},   # 10% æµé‡ 2 å°æ™‚
        {"traffic_percent": 50, "duration": "4h"},   # 50% æµé‡ 4 å°æ™‚
        {"traffic_percent": 100}                     # å…¨é‡ç™¼å¸ƒ
    ],
    "rollback_on_error_rate": 5  # éŒ¯èª¤ç‡è¶…é 5% è‡ªå‹•å›æ»¾
}
```

#### 11. å…¨é¢çš„å¯è§€æ¸¬æ€§

```python
from google.adk.plugins import LoggingPlugin

# ç”Ÿç”¢ç’°å¢ƒå•Ÿç”¨å®Œæ•´æ—¥èªŒ
logging_plugin = LoggingPlugin(
    log_level="INFO",
    include_context=True,
    include_tools=True,
    include_model_calls=True
)

agent = LlmAgent(
    plugins=[logging_plugin]
)
```

#### 12. æˆæœ¬èˆ‡æ•ˆèƒ½å„ªåŒ–

```python
# æ ¹æ“šä»»å‹™è¤‡é›œåº¦é¸æ“‡æ¨¡å‹
simple_tasks_agent = Agent(
    model=Gemini(model="gemini-2.5-flash-lite")  # å¿«é€Ÿã€ä½æˆæœ¬
)

complex_tasks_agent = Agent(
    model=Gemini(model="gemini-2.5-pro")  # å¼·å¤§ã€é«˜æˆæœ¬
)

# ä¸¦è¡Œå„ªåŒ–
parallel_team = ParallelAgent(
    sub_agents=[agent_a, agent_b, agent_c]  # ç¨ç«‹ä»»å‹™ä¸¦è¡Œ
)

# ä¸Šä¸‹æ–‡å£“ç¸®
app = App(
    events_compaction_config=EventsCompactionConfig(
        compaction_interval=10,
        overlap_size=2
    )
)
```

### å®‰å…¨æ€§æœ€ä½³å¯¦è¸

#### 13. å¤šå±¤é˜²è­·

```python
# 1. è¼¸å…¥éæ¿¾
def filter_input(user_input: str) -> dict:
    if contains_prompt_injection(user_input):
        return {"status": "blocked", "reason": "ç–‘ä¼¼æç¤ºæ³¨å…¥"}
    return {"status": "ok", "filtered_input": user_input}

# 2. è¼¸å‡ºæª¢æŸ¥
def check_output(agent_output: str) -> dict:
    if contains_pii(agent_output):
        return {"status": "blocked", "reason": "åŒ…å«å€‹äººè­˜åˆ¥è³‡è¨Š"}
    if contains_harmful_content(agent_output):
        return {"status": "blocked", "reason": "åŒ…å«æœ‰å®³å…§å®¹"}
    return {"status": "ok", "output": agent_output}

# 3. äººå·¥å¯©æ ¸
def sensitive_agent_callback(callback_context):
    if is_sensitive_operation(callback_context):
        request_human_review(callback_context)
```

#### 14. æ¬Šé™ç®¡ç†

```python
# åŸºæ–¼è§’è‰²çš„å­˜å–æ§åˆ¶ï¼ˆRBACï¼‰
def check_permissions(user_id: str, operation: str) -> bool:
    user_role = get_user_role(user_id)

    permission_matrix = {
        "admin": ["read", "write", "delete", "deploy"],
        "developer": ["read", "write", "test"],
        "viewer": ["read"]
    }

    return operation in permission_matrix.get(user_role, [])

# åœ¨å·¥å…·ä¸­å¼·åˆ¶æ¬Šé™æª¢æŸ¥
def delete_resource(resource_id: str, tool_context: ToolContext):
    user_id = tool_context.session.user_id

    if not check_permissions(user_id, "delete"):
        return {
            "status": "error",
            "message": "æ¬Šé™ä¸è¶³ï¼šéœ€è¦åˆªé™¤æ¬Šé™"
        }

    # åŸ·è¡Œåˆªé™¤æ“ä½œ
    ...
```

---

## ğŸ“š å»¶ä¼¸å­¸ç¿’è³‡æº

### å®˜æ–¹æ–‡ä»¶

#### ADK (Agent Development Kit)
- [ADK å®Œæ•´æ–‡ä»¶](https://google.github.io/adk-docs/)
- [Python å¿«é€Ÿå…¥é–€](https://google.github.io/adk-docs/get-started/python/)
- [Agents æ¦‚è¿°](https://google.github.io/adk-docs/agents/)
- [å·¥å…·é–‹ç™¼](https://google.github.io/adk-docs/tools/)
- [MCP å·¥å…·](https://google.github.io/adk-docs/tools/mcp-tools/)
- [Sessions ç®¡ç†](https://google.github.io/adk-docs/sessions/)
- [Memory ç³»çµ±](https://google.github.io/adk-docs/sessions/memory/)
- [è©•ä¼°æ¡†æ¶](https://google.github.io/adk-docs/evaluate/)
- [å¯è§€æ¸¬æ€§](https://google.github.io/adk-docs/observability/logging/)
- [A2A ä»‹ç´¹](https://google.github.io/adk-docs/a2a/intro/)
- [éƒ¨ç½²æŒ‡å—](https://google.github.io/adk-docs/deploy/agent-engine/)

#### Vertex AI
- [Agent Engine æ¦‚è¿°](https://cloud.google.com/vertex-ai/generative-ai/docs/agent-engine/overview)
- [Memory Bank æ–‡ä»¶](https://cloud.google.com/vertex-ai/generative-ai/docs/agent-engine/memory-bank/overview)
- [Tracing èˆ‡ç›£æ§](https://cloud.google.com/vertex-ai/docs/generative-ai/logging-and-monitoring)
- [å®‰å…¨æœ€ä½³å¯¦è¸](https://cloud.google.com/vertex-ai/docs/generative-ai/learn/responsible-ai)

#### å”å®šèˆ‡æ¨™æº–
- [A2A Protocol å®˜æ–¹ç¶²ç«™](https://a2a-protocol.org/)
- [A2A å”å®šè¦ç¯„](https://a2a-protocol.org/latest/spec/)
- [Model Context Protocol](https://spec.modelcontextprotocol.io/)
- [OpenTelemetry æ–‡ä»¶](https://opentelemetry.io/docs/)

### èª²ç¨‹è³‡æº

#### ç™½çš®æ›¸
- Day 1: Introduction to Agents
- Day 2: Agent Tools & Interoperability with MCP
- Day 3: Context Engineering - Sessions and Memory
- Day 4: Agent Quality - Observability and Evaluation
- Day 5: AgentOps - Prototype to Production

#### Kaggle Notebooks
- [Day 0: Troubleshooting and FAQs](https://www.kaggle.com/code/kaggle5daysofai/day-0-troubleshooting-and-faqs)
- [Day 2a: Agent Tools](https://www.kaggle.com/code/kaggle5daysofai/day-2a-agent-tools)
- [Day 2b: Agent Tools Best Practices](https://www.kaggle.com/code/kaggle5daysofai/day-2b-agent-tools-best-practices)
- [Day 3a: Agent Sessions](https://www.kaggle.com/code/kaggle5daysofai/day-3a-agent-sessions)
- [Day 3b: Agent Memory](https://www.kaggle.com/code/kaggle5daysofai/day-3b-agent-memory)
- [Day 4a: Agent Observability](https://www.kaggle.com/code/kaggle5daysofai/day-4a-agent-observability)
- [Day 4b: Agent Evaluation](https://www.kaggle.com/code/kaggle5daysofai/day-4b-agent-evaluation)

#### å½±ç‰‡è³‡æº
- [èª²ç¨‹ç›´æ’­æ’­æ”¾æ¸…å–®](https://www.youtube.com/c/kaggle)
- [NotebookLM Podcast æ‘˜è¦ç³»åˆ—](https://www.youtube.com/c/kaggle)

### ç¤¾ç¾¤è³‡æº

- [Kaggle Discord](https://discord.com/invite/kaggle)
- [Agent Starter Pack](https://github.com/GoogleCloudPlatform/agent-starter-pack)
- [Generative AI Examples](https://github.com/GoogleCloudPlatform/generative-ai)

### é€²éšä¸»é¡Œ

#### ç ”ç©¶è«–æ–‡èˆ‡æ¡ˆä¾‹
- **AlphaEvolve** - è‡ªæˆ‘æ¼”åŒ–çš„æ¼”ç®—æ³•å„ªåŒ–ç³»çµ±
- **Co-Scientist** - ç§‘å­¸ç ”ç©¶åŠ é€Ÿ Agent
- **NotebookLM** - é•·æœŸç‹€æ…‹ç®¡ç†å¯¦ä¾‹

#### é–‹æºå°ˆæ¡ˆ
- MCP Servers ç¤¾ç¾¤å°ˆæ¡ˆ
- Agent Framework æ¯”è¼ƒç ”ç©¶
- Multi-Agent å”ä½œç¯„ä¾‹

---

## ğŸ“ å­¸ç¿’æˆæœèˆ‡æ‡‰ç”¨

### å®Œæˆ 5 å¤©èª²ç¨‹å¾Œï¼Œä½ å·²ç¶“èƒ½å¤ ï¼š

#### åŸºç¤èƒ½åŠ› âœ…
- ç†è§£ AI Agent çš„æœ¬è³ªèˆ‡æ ¸å¿ƒæ¶æ§‹
- å»ºç«‹å–®ä¸€ Agent ä¸¦é…ç½®å·¥å…·
- ä½¿ç”¨ ADK é€²è¡Œé–‹ç™¼å’Œé™¤éŒ¯
- æŒæ¡ Think-Act-Observe å¾ªç’°æ©Ÿåˆ¶

#### æ¶æ§‹è¨­è¨ˆ âœ…
- è¨­è¨ˆå¤š Agent å”ä½œç³»çµ±
- æ ¹æ“šéœ€æ±‚é¸æ“‡åˆé©çš„æ¶æ§‹æ¨¡å¼
- ç†è§£ç‹€æ…‹ç®¡ç†æ©Ÿåˆ¶
- èƒ½çµ„åˆå¤šç¨®æ¨¡å¼å»ºç«‹è¤‡é›œç³»çµ±

#### å·¥å…·æ•´åˆ âœ…
- è¨­è¨ˆç¬¦åˆæœ€ä½³å¯¦å‹™çš„è‡ªè¨‚å·¥å…·
- å°‡ Python å‡½æ•¸è½‰æ›ç‚º Agent å·¥å…·
- ä½¿ç”¨ Agent Tools å¯¦ç¾å°ˆå®¶åˆ†å·¥
- æ•´åˆ MCP å¤–éƒ¨æœå‹™
- å¯¦ä½œé•·æ™‚é–“é‹è¡Œæ“ä½œèˆ‡äººå·¥å¯©æ‰¹

#### ä¸Šä¸‹æ–‡ç®¡ç† âœ…
- ç†è§£æƒ…å¢ƒå·¥ç¨‹çš„æœ¬è³ª
- å»ºç«‹æŒä¹…åŒ–çš„æœƒè©±ç®¡ç†ç³»çµ±
- å¯¦ä½œä¸Šä¸‹æ–‡å£“ç¸®ç­–ç•¥
- å»ºç«‹è·¨å°è©±çš„è¨˜æ†¶ç³»çµ±
- ç†è§£ RAG èˆ‡ Memory çš„å”åŒä½¿ç”¨

#### å“è³ªä¿è­‰ âœ…
- å¯¦æ–½å¯è§€æ¸¬æ€§ï¼ˆLogsã€Tracesã€Metricsï¼‰
- å»ºç«‹ç³»çµ±åŒ–çš„è©•ä¼°é…ç½®
- ä½¿ç”¨ LLM-as-a-Judge èˆ‡ HITL è©•ä¼°
- åˆ†æè¿½è¹¤æ‰¾å‡ºå•é¡Œ
- å»ºç«‹æŒçºŒæ”¹é€²çš„å“è³ªé£›è¼ª

#### ç”Ÿç”¢éƒ¨ç½² âœ…
- ç†è§£ AgentOps æ¦‚å¿µ
- å¯¦ä½œ A2A å”å®šé€²è¡Œ Agent é–“é€šè¨Š
- éƒ¨ç½²åˆ° Vertex AI Agent Engine
- å¯¦æ–½ CI/CD ç®¡ç·šèˆ‡è©•ä¼°é–€æ§
- å»ºç«‹å®‰å…¨ç™¼å¸ƒç­–ç•¥ï¼ˆCanaryã€Blue-Greenï¼‰
- å¯¦æ–½ç”Ÿç”¢ç’°å¢ƒç›£æ§èˆ‡æ¼”åŒ–æ©Ÿåˆ¶

### å¯ä»¥å»ºæ§‹çš„å°ˆæ¡ˆé¡å‹

#### 1. ä¼æ¥­æ‡‰ç”¨
- **å®¢æˆ¶æœå‹™ç³»çµ±** - æ•´åˆ FAQã€è¨‚å–®æŸ¥è©¢ã€ç”¢å“æ¨è–¦
- **IT æ”¯æ´åŠ©æ‰‹** - æ•…éšœæ’é™¤ã€ç³»çµ±ç›£æ§ã€è‡ªå‹•åŒ–ç¶­è­·
- **æ–‡ä»¶è™•ç†ç³»çµ±** - å¤š Agent å”ä½œè™•ç†ã€åˆ†é¡ã€æ‘˜è¦æ–‡ä»¶

#### 2. è³‡æ–™åˆ†æ
- **è³‡æ–™åˆ†æåŠ©æ‰‹** - è‡ªå‹•ç”Ÿæˆå ±è¡¨ã€è¦–è¦ºåŒ–ã€æ´å¯Ÿ
- **å•†æ¥­æ™ºæ…§ Agent** - æ•´åˆå¤šæ•¸æ“šæºã€è¶¨å‹¢åˆ†æã€é æ¸¬

#### 3. å€‹äººåŠ©ç†
- **æ™ºèƒ½åŠ©ç†** - è¡Œç¨‹ç®¡ç†ã€é›»å­éƒµä»¶åˆ†é¡ã€ä»»å‹™æé†’
- **å­¸ç¿’è¼”å°** - å€‹äººåŒ–æ•™å­¸ã€é€²åº¦è¿½è¹¤ã€è³‡æºæ¨è–¦

#### 4. å°ˆæ¥­é ˜åŸŸ
- **æ³•å¾‹æ–‡ä»¶åˆ†æ** - åˆç´„å¯©æŸ¥ã€æ¢æ¬¾æ¯”è¼ƒã€é¢¨éšªè©•ä¼°
- **é†«ç™‚è«®è©¢è¼”åŠ©** - ç—…å²æ•´åˆã€æ–‡ç»æª¢ç´¢ã€æ²»ç™‚å»ºè­°
- **è²¡å‹™è¦åŠƒ** - æŠ•è³‡åˆ†æã€é¢¨éšªè©•ä¼°ã€å€‹äººåŒ–å»ºè­°

### è·æ¥­ç™¼å±•è·¯å¾‘

#### AI Agent é–‹ç™¼è€…
- æ ¸å¿ƒæŠ€èƒ½ï¼šAgent æ¶æ§‹è¨­è¨ˆã€å·¥å…·é–‹ç™¼ã€ç³»çµ±æ•´åˆ
- é€²éšæ–¹å‘ï¼šå¤š Agent ç³»çµ±ã€è‡ªæˆ‘æ¼”åŒ– Agent

#### æç¤ºå·¥ç¨‹å¸«
- æ ¸å¿ƒæŠ€èƒ½ï¼šæŒ‡ä»¤è¨­è¨ˆã€ä¸Šä¸‹æ–‡å·¥ç¨‹ã€è©•ä¼°å„ªåŒ–
- é€²éšæ–¹å‘ï¼šé ˜åŸŸå°ˆæ¥­çŸ¥è­˜æ•´åˆã€å“è³ªä¿è­‰

#### AI å·¥ç¨‹å¸«
- æ ¸å¿ƒæŠ€èƒ½ï¼šç”Ÿç”¢éƒ¨ç½²ã€å¯è§€æ¸¬æ€§ã€ç¶­é‹ç®¡ç†
- é€²éšæ–¹å‘ï¼šå¤§è¦æ¨¡ Agent ç³»çµ±ã€è·¨çµ„ç¹”æ•´åˆ

#### AgentOps å·¥ç¨‹å¸«
- æ ¸å¿ƒæŠ€èƒ½ï¼šCI/CD ç®¡ç·šã€ç›£æ§å‘Šè­¦ã€å®‰å…¨æ²»ç†
- é€²éšæ–¹å‘ï¼šä¼æ¥­ç´š Agent å¹³å°ã€å¤šç§Ÿæˆ¶ç®¡ç†

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡Œå‹•

### ç«‹å³è¡Œå‹•ï¼ˆä»Šå¤©ï¼‰

1. **è¤‡ç¿’é—œéµæ¦‚å¿µ**
   - å›é¡§ 5 å¤©å­¸ç¿’ç­†è¨˜
   - æ•´ç†é‡è¦ç¨‹å¼ç¢¼ç¯„ä¾‹
   - æ¨™è¨˜ä¸æ¸…æ¥šçš„åœ°æ–¹

2. **å‹•æ‰‹å¯¦ä½œ**
   - å»ºç«‹ç¬¬ä¸€å€‹å®Œæ•´ Agent å°ˆæ¡ˆ
   - æ•´åˆè‡³å°‘ 2-3 å€‹å·¥å…·
   - å¯¦æ–½åŸºæœ¬çš„å¯è§€æ¸¬æ€§

3. **ç¤¾ç¾¤åƒèˆ‡**
   - åŠ å…¥ Kaggle Discord
   - åˆ†äº«å­¸ç¿’å¿ƒå¾—
   - æå‡ºå•é¡Œèˆ‡è¨è«–

### çŸ­æœŸç›®æ¨™ï¼ˆæœ¬é€±ï¼‰

1. **æ·±åŒ–æŠ€èƒ½**
   - å¯¦ä½œå¤š Agent å”ä½œç³»çµ±
   - æ•´åˆ MCP å¤–éƒ¨æœå‹™
   - å»ºç«‹è©•ä¼°é…ç½®èˆ‡æ¸¬è©¦æ¡ˆä¾‹

2. **å°ˆæ¡ˆé–‹ç™¼**
   - é¸æ“‡ä¸€å€‹çœŸå¯¦å ´æ™¯
   - è¨­è¨ˆå®Œæ•´æ¶æ§‹
   - å¯¦ä½œ MVPï¼ˆæœ€å°å¯è¡Œç”¢å“ï¼‰

3. **å“è³ªæå‡**
   - å¯¦æ–½å…¨é¢çš„å¯è§€æ¸¬æ€§
   - å»ºç«‹ Golden Dataset
   - åŸ·è¡Œç³»çµ±åŒ–è©•ä¼°

### ä¸­æœŸç›®æ¨™ï¼ˆæœ¬æœˆï¼‰

1. **ç”Ÿç”¢éƒ¨ç½²**
   - éƒ¨ç½²åˆ° Vertex AI Agent Engine
   - è¨­ç½® CI/CD ç®¡ç·š
   - å¯¦æ–½ç›£æ§èˆ‡è­¦å ±

2. **é€²éšåŠŸèƒ½**
   - å¯¦ä½œ Memory Bank
   - å»ºç«‹ A2A é€šè¨Š
   - æ•´åˆå¤šå€‹å¤–éƒ¨æœå‹™

3. **æŒçºŒå­¸ç¿’**
   - æ·±å…¥ç ”ç©¶ç™½çš®æ›¸
   - æ¢ç´¢é€²éš ADK åŠŸèƒ½
   - åƒèˆ‡ç¤¾ç¾¤å°ˆæ¡ˆ

### é•·æœŸç›®æ¨™ï¼ˆæ¥ä¸‹ä¾†å¹¾å€‹æœˆï¼‰

1. **å°ˆæ¥­ç™¼å±•**
   - æˆç‚º AI Agent é–‹ç™¼å°ˆå®¶
   - å»ºç«‹å€‹äººä½œå“é›†
   - åˆ†äº«çŸ¥è­˜èˆ‡ç¶“é©—

2. **ç³»çµ±å„ªåŒ–**
   - å¯¦æ–½å¤§è¦æ¨¡éƒ¨ç½²
   - å„ªåŒ–æˆæœ¬èˆ‡æ•ˆèƒ½
   - å»ºç«‹ä¼æ¥­ç´šæ²»ç†

3. **å‰µæ–°æ¢ç´¢**
   - ç ”ç©¶è‡ªæˆ‘æ¼”åŒ– Agent
   - æ¢ç´¢æ–°çš„æ‡‰ç”¨å ´æ™¯
   - è²¢ç»é–‹æºå°ˆæ¡ˆ

---

## ğŸŒŸ ç¸½çµèˆ‡åæ€

### 5 å¤©å­¸ç¿’æ—…ç¨‹çš„æ ¸å¿ƒåƒ¹å€¼

é€™å€‹å¯†é›†èª²ç¨‹ä¸åƒ…æ•™æˆäº† AI Agent çš„æŠ€è¡“çŸ¥è­˜ï¼Œæ›´é‡è¦çš„æ˜¯å»ºç«‹äº†ä¸€å¥—å®Œæ•´çš„æ€ç¶­æ¡†æ¶ï¼š

1. **ç³»çµ±åŒ–æ€ç¶­**
   - å¾å–®ä¸€ Agent åˆ°å¤š Agent ç³»çµ±
   - å¾åŸå‹åˆ°ç”Ÿç”¢ç’°å¢ƒ
   - å¾åŠŸèƒ½é–‹ç™¼åˆ°å“è³ªä¿è­‰

2. **å·¥ç¨‹åŒ–å¯¦è¸**
   - æ¨¡çµ„åŒ–è¨­è¨ˆ
   - æ¨™æº–åŒ–å”å®š
   - è‡ªå‹•åŒ–æµç¨‹

3. **ä¼æ¥­ç´šè¦–è§’**
   - å®‰å…¨æ€§èˆ‡æ²»ç†
   - å¯æ“´å±•æ€§èˆ‡ç¶­é‹
   - æˆæœ¬èˆ‡æ•ˆèƒ½å„ªåŒ–

### é—œéµæ´å¯Ÿ

#### Think-Act-Observe æ˜¯æ ¸å¿ƒ
æ‰€æœ‰ Agent ç³»çµ±éƒ½åœç¹é€™å€‹å¾ªç’°å±•é–‹ï¼Œç†è§£é€™é»å°±ç†è§£äº† Agent çš„æœ¬è³ªã€‚

#### æ¨¡çµ„åŒ–è¨­è¨ˆæ˜¯ç‹é“
å°‡è¤‡é›œä»»å‹™åˆ†è§£ç‚ºç°¡å–® Agent çš„å”ä½œï¼Œæ¯”å»ºç«‹ä¸€å€‹è¤‡é›œ Agent æ›´å¯é ã€‚

#### æ¶æ§‹æ¨¡å¼æœ‰è¦å¾‹
Sequentialï¼ˆé †åºï¼‰ã€Parallelï¼ˆä¸¦è¡Œï¼‰ã€Loopï¼ˆå¾ªç’°ï¼‰ä¸‰ç¨®æ¨¡å¼å¯çµ„åˆå‡ºç„¡é™å¯èƒ½ã€‚

#### è©•ä¼°å¾ Day Zero é–‹å§‹
å“è³ªä¸æ˜¯æ¸¬è©¦éšæ®µæ‰è€ƒæ…®ï¼Œè€Œæ˜¯å¾è¨­è¨ˆé–‹å§‹å°±èå…¥æ¶æ§‹çš„æ”¯æŸ±ã€‚

#### è§€å¯Ÿ-è¡Œå‹•-æ¼”åŒ–æ˜¯æŒçºŒå¾ªç’°
ç„¡è«–æ˜¯ Agent ç³»çµ±é‚„æ˜¯å€‹äººå­¸ç¿’ï¼Œéƒ½éœ€è¦é€™å€‹æŒçºŒæ”¹é€²çš„æ©Ÿåˆ¶ã€‚

### æœªä¾†å±•æœ›

AI Agent æŠ€è¡“æ­£åœ¨å¿«é€Ÿç™¼å±•ï¼š

- **æŠ€è¡“æ¼”é€²** - å¾ Level 1 å·¥å…·ä½¿ç”¨ï¼Œé€æ­¥é‚å‘ Level 4 è‡ªæˆ‘æ¼”åŒ–
- **æ‡‰ç”¨æ“´å±•** - å¾è¼”åŠ©å·¥å…·é€²åŒ–ç‚ºåœ˜éšŠæˆå“¡
- **ç”Ÿæ…‹æˆç†Ÿ** - æ¨™æº–åŒ–å”å®šã€é–‹æºå·¥å…·ã€ç¤¾ç¾¤è³‡æºæ—¥ç›Šè±å¯Œ

ä½œç‚º AI Agent é–‹ç™¼è€…ï¼Œæˆ‘å€‘ç«™åœ¨é€™å€‹æ¿€å‹•äººå¿ƒçš„æŠ€è¡“å‰æ²¿ï¼Œæœ‰æ©Ÿæœƒå¡‘é€ æœªä¾†çš„äººæ©Ÿå”ä½œæ–¹å¼ã€‚

### æœ€å¾Œçš„è©±

> **"å“è³ªä¸æ˜¯ä¸€æ¬¡æ€§çš„è¡Œç‚ºï¼Œè€Œæ˜¯ä¸€ç¨®ç¿’æ…£ã€‚" - Aristotle**

é€™å¥è©±ä¸åƒ…é©ç”¨æ–¼ Agent é–‹ç™¼ï¼Œä¹Ÿé©ç”¨æ–¼æˆ‘å€‘çš„å­¸ç¿’æ—…ç¨‹ã€‚æŒçºŒå­¸ç¿’ã€æŒçºŒå¯¦è¸ã€æŒçºŒæ”¹é€²ï¼Œæ‰æ˜¯é€šå¾€ç²¾é€šçš„é“è·¯ã€‚

æ„Ÿè¬ä½ å®Œæˆé€™ 5 å¤©çš„å­¸ç¿’æ—…ç¨‹ã€‚ç¾åœ¨ï¼Œæ˜¯æ™‚å€™å°‡æ‰€å­¸æ‡‰ç”¨åˆ°å¯¦éš›å°ˆæ¡ˆä¸­ï¼Œå»ºæ§‹å‡ºæ”¹è®Šä¸–ç•Œçš„ AI Agentï¼

---

**ç¥ä½ å»ºæ§‹å‡ºå“è¶Šçš„ AI Agent ç³»çµ±ï¼ğŸš€**

---

## ğŸ“ é™„éŒ„

### A. å¿«é€Ÿåƒè€ƒè¡¨

#### Agent é…ç½®ç¯„æœ¬

```python
# åŸºç¤ Agent
agent = Agent(
    name="AgentName",
    model=Gemini(model="gemini-2.5-flash-lite", retry_options=retry_config),
    instruction="Clear instruction here.",
    tools=[tool1, tool2],
    output_key="output_key_name"
)

# Sequential Agent
sequential = SequentialAgent(
    name="Pipeline",
    sub_agents=[agent1, agent2, agent3]
)

# Parallel Agent
parallel = ParallelAgent(
    name="ParallelTeam",
    sub_agents=[agent1, agent2, agent3]
)

# Loop Agent
loop = LoopAgent(
    name="RefinementLoop",
    sub_agents=[critic, refiner],
    max_iterations=3
)
```

#### å¸¸ç”¨å·¥å…·å°å…¥

```python
from google.adk.agents import Agent, SequentialAgent, ParallelAgent, LoopAgent
from google.adk.models.google_llm import Gemini
from google.adk.runners import Runner, InMemoryRunner
from google.adk.tools import AgentTool, FunctionTool, google_search
from google.adk.tools import load_memory, preload_memory
from google.adk.sessions import InMemorySessionService, DatabaseSessionService
from google.adk.memory import InMemoryMemoryService
from google.adk.apps.app import App, EventsCompactionConfig, ResumabilityConfig
from google.adk.plugins import LoggingPlugin
from google.genai import types
```

### B. å¸¸è¦‹å•é¡Œæ’æŸ¥

#### Agent ç„¡å›æ‡‰
- âœ… æª¢æŸ¥ API Key æ˜¯å¦æ­£ç¢º
- âœ… ç¢ºèªç¶²è·¯é€£æ¥
- âœ… æª¢æŸ¥æ—¥èªŒéŒ¯èª¤è¨Šæ¯
- âœ… é©—è­‰æ¨¡å‹åç¨±æ˜¯å¦æ­£ç¢º

#### å·¥å…·å‘¼å«å¤±æ•—
- âœ… ç¢ºèªå·¥å…· docstring å®Œæ•´
- âœ… æª¢æŸ¥åƒæ•¸å‹åˆ¥æ¨™è¨»
- âœ… é©—è­‰å·¥å…·è¿”å›æ ¼å¼
- âœ… æŸ¥çœ‹éŒ¯èª¤æ—¥èªŒ

#### Session è³‡æ–™éºå¤±
- âœ… ç¢ºèªä½¿ç”¨ DatabaseSessionService
- âœ… æª¢æŸ¥è³‡æ–™åº«é€£æ¥
- âœ… é©—è­‰ session_id æ­£ç¢º
- âœ… ç¢ºèªè³‡æ–™æŒä¹…åŒ–

#### Memory ç„¡æ³•æª¢ç´¢
- âœ… ç¢ºèªå·²å‘¼å« add_session_to_memory
- âœ… æª¢æŸ¥ Memory Service é¡å‹
- âœ… é©—è­‰æœå°‹æŸ¥è©¢
- âœ… ç¢ºèª user_id éš”é›¢

#### éƒ¨ç½²å¤±æ•—
- âœ… æª¢æŸ¥ GCP å°ˆæ¡ˆè¨­å®š
- âœ… ç¢ºèª API å·²å•Ÿç”¨
- âœ… é©—è­‰é…ç½®æª”æ¡ˆæ ¼å¼
- âœ… æŸ¥çœ‹éƒ¨ç½²æ—¥èªŒ

### C. æ•ˆèƒ½å„ªåŒ–æª¢æŸ¥æ¸…å–®

- [ ] é¸æ“‡é©ç•¶çš„æ¨¡å‹ï¼ˆFlash vs Proï¼‰
- [ ] å¯¦æ–½ä¸Šä¸‹æ–‡å£“ç¸®
- [ ] ä½¿ç”¨ä¸¦è¡Œ Agentï¼ˆç¨ç«‹ä»»å‹™ï¼‰
- [ ] å„ªåŒ–å·¥å…·è¼¸å‡ºå¤§å°
- [ ] é…ç½®åˆé©çš„ min/max instances
- [ ] å¯¦æ–½ Memory Consolidation
- [ ] ä½¿ç”¨ Tool Retrievalï¼ˆå¤§é‡å·¥å…·æ™‚ï¼‰
- [ ] è¨­ç½®åˆç†çš„ timeout

### D. å®‰å…¨æª¢æŸ¥æ¸…å–®

- [ ] å¯¦æ–½è¼¸å…¥éæ¿¾
- [ ] å¯¦æ–½è¼¸å‡ºæª¢æŸ¥
- [ ] é…ç½® HITL å¯©æ ¸
- [ ] å»ºç«‹æ¬Šé™ç®¡ç†
- [ ] å¯¦æ–½ PII å¡—éŠ·
- [ ] è¨­ç½®å¯©è¨ˆæ—¥èªŒ
- [ ] ä½¿ç”¨ API Gateway
- [ ] å®šæœŸå®‰å…¨å¯©æŸ¥

### E. è¡“èªè¡¨

| è¡“èª | è‹±æ–‡ | å®šç¾© |
|------|------|------|
| AI Agent | AI Agent | å…·å‚™æ¨ç†ã€ä½¿ç”¨å·¥å…·å’ŒåŸ·è¡Œä»»å‹™èƒ½åŠ›çš„å®Œæ•´è‡ªä¸»è»Ÿé«”ç³»çµ± |
| Think-Act-Observe | Think-Act-Observe | Agent æ ¸å¿ƒå·¥ä½œå¾ªç’°ï¼šæ€è€ƒâ†’è¡Œå‹•â†’è§€å¯Ÿ |
| ADK | Agent Development Kit | Google çš„ Agent é–‹ç™¼å·¥å…·åŒ… |
| MCP | Model Context Protocol | æ¨¡å‹ä¸Šä¸‹æ–‡å”å®šï¼Œå·¥å…·æ•´åˆæ¨™æº– |
| A2A | Agent2Agent Protocol | Agent é–“é€šè¨Šå”å®š |
| Session | Session | å–®ä¸€å°è©±çš„å³æ™‚å®¹å™¨ |
| Memory | Memory | è·¨å°è©±çš„æŒä¹…åŒ–çŸ¥è­˜ |
| RAG | Retrieval Augmented Generation | æª¢ç´¢å¢å¼·ç”Ÿæˆ |
| HITL | Human-in-the-Loop | äººå·¥åƒèˆ‡å¾ªç’° |
| AgentOps | Agent Operations | AI ä»£ç†ç¨‹å¼ç‡Ÿé‹ |
| LLM | Large Language Model | å¤§å‹èªè¨€æ¨¡å‹ |
| Orchestration | Orchestration | ç·¨æ’ã€å”èª¿ |
| Observability | Observability | å¯è§€æ¸¬æ€§ |
| Trace | Trace | è¿½è¹¤ã€è»Œè·¡ |
| Golden Dataset | Golden Dataset | é»ƒé‡‘è³‡æ–™é›†ã€æ¨™æº–æ¸¬è©¦é›† |

---

**æ–‡ä»¶è³‡è¨Š**
- **å»ºç«‹æ—¥æœŸï¼š** 2025-11-14
- **ç‰ˆæœ¬ï¼š** 1.0
- **ä½œè€…ï¼š** Ray å¼µç‘æ¶µ
- **èª²ç¨‹ï¼š** Kaggle Ã— Google - 5-Day AI Agents Intensive Course
- **ç¸½é æ•¸ï¼š** ç´„ 150 é ï¼ˆå®Œæ•´ç‰ˆï¼‰

---

**è‡´è¬**

æ„Ÿè¬ Kaggle èˆ‡ Google åœ˜éšŠæä¾›å¦‚æ­¤å„ªè³ªçš„å…è²»èª²ç¨‹ï¼Œä»¥åŠæ‰€æœ‰åƒèˆ‡è¬›æˆçš„å°ˆå®¶å­¸è€…ã€‚ç‰¹åˆ¥æ„Ÿè¬ï¼š
- Kanchana Patlolla, Anant Nawalgariaï¼ˆèª²ç¨‹ä¸»æŒï¼‰
- æ‰€æœ‰ç™½çš®æ›¸ä½œè€…èˆ‡æŠ€è¡“å°ˆå®¶
- Kaggle ç¤¾ç¾¤çš„æ”¯æŒèˆ‡äº’å‹•

**ç‰ˆæ¬Šè²æ˜**

æœ¬æ–‡ä»¶åŸºæ–¼ Kaggle 5-Day AI Agents èª²ç¨‹å…§å®¹æ•´ç†ï¼Œåƒ…ä¾›å€‹äººå­¸ç¿’ä½¿ç”¨ã€‚èª²ç¨‹å…§å®¹ç‰ˆæ¬Šæ­¸ Kaggle èˆ‡ Google æ‰€æœ‰ã€‚

---

**ğŸŒ ç›¸é—œé€£çµ**

- [Kaggle èª²ç¨‹é¦–é ](https://www.kaggle.com/learn-guide/5-day-genai)
- [ADK å®˜æ–¹æ–‡ä»¶](https://google.github.io/adk-docs/)
- [Kaggle Discord ç¤¾ç¾¤](https://discord.com/invite/kaggle)
- [A2A Protocol å®˜ç¶²](https://a2a-protocol.org/)
- [Vertex AI Console](https://console.cloud.google.com/vertex-ai)

---

**çµæŸèª**

é€™ä»½ç¸½çµæ–‡ä»¶æ•´åˆäº† 5 å¤©èª²ç¨‹çš„æ‰€æœ‰æ ¸å¿ƒå…§å®¹ï¼Œå¾åŸºç¤æ¦‚å¿µåˆ°é€²éšæ‡‰ç”¨ï¼Œå¾ç†è«–çŸ¥è­˜åˆ°å¯¦ä½œæŠ€å·§ï¼Œå¸Œæœ›èƒ½æˆç‚ºä½ åœ¨ AI Agent é–‹ç™¼é“è·¯ä¸Šçš„å¯¦ç”¨åƒè€ƒã€‚

è¨˜ä½ï¼Œå­¸ç¿’åªæ˜¯èµ·é»ï¼Œå¯¦è¸æ‰èƒ½å¸¶ä¾†çœŸæ­£çš„æˆé•·ã€‚ç¾åœ¨å°±é–‹å§‹å»ºæ§‹ä½ çš„ç¬¬ä¸€å€‹ç”Ÿç”¢ç´š AI Agent å§ï¼

**Let's build amazing AI Agents together! ğŸ¤–âœ¨**
